&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ar&quot; dir=&quot;rtl&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©&lt;/title&gt;
    &lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
    &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;style&gt;
        * {
            font-family: &#039;Cairo&#039;, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .flashcard {
            perspective: 1000px;
            height: 280px;
        }
        
        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
            cursor: pointer;
        }
        
        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }
        
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 2px solid rgba(255,255,255,0.1);
        }
        
        .flashcard-back {
            transform: rotateY(180deg);
        }
        
        .slide-in {
            animation: slideIn 0.6s ease-out;
        }
        
        .fade-in {
            animation: fadeInUp 0.8s ease-out;
        }
        
        .bounce-in {
            animation: bounceIn 0.6s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 15px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            animation: slideIn 0.4s ease-out;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
        }
        
        .notification-success { 
            background: linear-gradient(135deg, #10b981, #059669);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .notification-error { 
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .notification-info { 
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.4s ease-out;
        }
        
        .modal-content {
            background: white;
            border-radius: 25px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            animation: slideUp 0.4s ease-out;
            box-shadow: 0 25px 50px rgba(0,0,0,0.25);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .section-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .floating-element {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulseGlow {
            from { box-shadow: 0 0 20px rgba(102, 126, 234, 0.4); }
            to { box-shadow: 0 0 30px rgba(102, 126, 234, 0.8); }
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;min-h-screen&quot;&gt;
    &lt;!-- Header --&gt;
    &lt;header class=&quot;section-card shadow-2xl border-b border-white/20&quot;&gt;
        &lt;div class=&quot;container mx-auto px-6 py-6&quot;&gt;
            &lt;div class=&quot;flex items-center justify-between&quot;&gt;
                &lt;div class=&quot;flex items-center space-x-6 space-x-reverse&quot;&gt;
                    &lt;div class=&quot;w-16 h-16 bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center text-white text-3xl font-bold shadow-lg floating-element&quot;&gt;
                        ğŸ“
                    &lt;/div&gt;
                    &lt;div&gt;
                        &lt;h1 class=&quot;text-3xl font-bold gradient-text&quot;&gt;Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©&lt;/h1&gt;
                        &lt;p class=&quot;text-gray-600 text-lg mt-1&quot;&gt;ØªØ¹Ù„Ù… Ø¨Ø·Ø±ÙŠÙ‚Ø© ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆÙ…Ù…ØªØ¹Ø© Ù…Ø¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ&lt;/p&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class=&quot;flex items-center space-x-6 space-x-reverse&quot;&gt;
                    &lt;!-- Developer Info Card --&gt;
                    &lt;div class=&quot;bg-gradient-to-r from-purple-100 to-blue-100 rounded-2xl p-4 border-2 border-purple-200 shadow-lg card-hover&quot;&gt;
                        &lt;div class=&quot;text-right&quot;&gt;
                            &lt;div class=&quot;flex items-center justify-end mb-2&quot;&gt;
                                &lt;div class=&quot;w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center text-white font-bold ml-3&quot;&gt;
                                    Ø¹
                                &lt;/div&gt;
                                &lt;div&gt;
                                    &lt;p class=&quot;text-sm font-bold text-purple-800&quot;&gt;Ø£. Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ù†ØµØ± Ø§Ù„Ù„Ù‡&lt;/p&gt;
                                    &lt;p class=&quot;text-xs text-purple-600&quot;&gt;Ù…Ø·ÙˆØ± ØªØ·Ø¨ÙŠÙ‚Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ©&lt;/p&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div class=&quot;flex items-center justify-end space-x-3 space-x-reverse&quot;&gt;
                                &lt;a href=&quot;https://www.instagram.com/nasrallah_2002/&quot; target=&quot;_blank&quot; 
                                   class=&quot;flex items-center bg-gradient-to-r from-pink-500 to-rose-500 text-white px-3 py-1 rounded-lg text-xs font-bold hover:from-pink-600 hover:to-rose-600 transition-all shadow-md&quot;&gt;
                                    &lt;span class=&quot;ml-1&quot;&gt;ğŸ“·&lt;/span&gt;
                                    Instagram
                                &lt;/a&gt;
                                &lt;a href=&quot;https://www.youtube.com/@tnasrallah&quot; target=&quot;_blank&quot; 
                                   class=&quot;flex items-center bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1 rounded-lg text-xs font-bold hover:from-red-600 hover:to-red-700 transition-all shadow-md&quot;&gt;
                                    &lt;span class=&quot;ml-1&quot;&gt;ğŸ“º&lt;/span&gt;
                                    YouTube
                                &lt;/a&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/header&gt;

    &lt;div class=&quot;container mx-auto px-6 py-8 max-w-6xl&quot;&gt;

        &lt;!-- Game Instructions Section --&gt;
        &lt;section class=&quot;section-card rounded-3xl shadow-2xl p-8 mb-8 fade-in&quot;&gt;
            &lt;div class=&quot;text-center mb-8&quot;&gt;
                &lt;div class=&quot;inline-flex items-center bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-2xl font-bold text-lg shadow-lg&quot;&gt;
                    &lt;span class=&quot;text-2xl ml-3&quot;&gt;ğŸ®&lt;/span&gt;
                    ÙƒÙŠÙ ØªØ¹Ù…Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©ØŸ
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class=&quot;grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8&quot;&gt;
                &lt;div class=&quot;bg-gradient-to-br from-blue-50 to-indigo-100 rounded-2xl p-6 text-center border-2 border-blue-200 card-hover&quot;&gt;
                    &lt;div class=&quot;w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white text-2xl font-bold mx-auto mb-4 floating-element&quot;&gt;
                        ğŸ¤–
                    &lt;/div&gt;
                    &lt;h3 class=&quot;font-bold text-blue-800 mb-2&quot;&gt;1. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª&lt;/h3&gt;
                    &lt;p class=&quot;text-sm text-blue-700&quot;&gt;Ø£Ø¯Ø®Ù„ Ù…ÙˆØ¶ÙˆØ¹Ø§Ù‹ Ø£Ùˆ Ù†ØµØ§Ù‹ ØªØ¹Ù„ÙŠÙ…ÙŠØ§Ù‹ ÙˆØ§ØªØ±ÙƒÙ‡ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ©&lt;/p&gt;
                &lt;/div&gt;
                
                &lt;div class=&quot;bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl p-6 text-center border-2 border-green-200 card-hover&quot;&gt;
                    &lt;div class=&quot;w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center text-white text-2xl font-bold mx-auto mb-4 floating-element&quot; style=&quot;animation-delay: 0.2s&quot;&gt;
                        ğŸ‘¥
                    &lt;/div&gt;
                    &lt;h3 class=&quot;font-bold text-green-800 mb-2&quot;&gt;2. Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ù„Ø§Ø¨&lt;/h3&gt;
                    &lt;p class=&quot;text-sm text-green-700&quot;&gt;Ø£Ø¶Ù Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø·Ù„Ø§Ø¨ Ù„ØªØªØ¨Ø¹ ØªÙ‚Ø¯Ù…Ù‡Ù… ÙˆÙ†Ù‚Ø§Ø·Ù‡Ù… ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…&lt;/p&gt;
                &lt;/div&gt;
                
                &lt;div class=&quot;bg-gradient-to-br from-purple-50 to-violet-100 rounded-2xl p-6 text-center border-2 border-purple-200 card-hover&quot;&gt;
                    &lt;div class=&quot;w-16 h-16 bg-gradient-to-r from-purple-500 to-violet-600 rounded-2xl flex items-center justify-center text-white text-2xl font-bold mx-auto mb-4 floating-element&quot; style=&quot;animation-delay: 0.4s&quot;&gt;
                        ğŸ“š
                    &lt;/div&gt;
                    &lt;h3 class=&quot;font-bold text-purple-800 mb-2&quot;&gt;3. Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª&lt;/h3&gt;
                    &lt;p class=&quot;text-sm text-purple-700&quot;&gt;Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ù„Ù‚Ù„Ø¨Ù‡Ø§ ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª&lt;/p&gt;
                &lt;/div&gt;
                
                &lt;div class=&quot;bg-gradient-to-br from-orange-50 to-red-100 rounded-2xl p-6 text-center border-2 border-orange-200 card-hover&quot;&gt;
                    &lt;div class=&quot;w-16 h-16 bg-gradient-to-r from-orange-500 to-red-600 rounded-2xl flex items-center justify-center text-white text-2xl font-bold mx-auto mb-4 floating-element&quot; style=&quot;animation-delay: 0.6s&quot;&gt;
                        ğŸ†
                    &lt;/div&gt;
                    &lt;h3 class=&quot;font-bold text-orange-800 mb-2&quot;&gt;4. Ø§Ø®ØªØ¨Ø§Ø± ØªÙØ§Ø¹Ù„ÙŠ&lt;/h3&gt;
                    &lt;p class=&quot;text-sm text-orange-700&quot;&gt;Ø§Ø¨Ø¯Ø£ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØªÙ†Ø§ÙØ³ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†&lt;/p&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;!-- Features Highlight --&gt;
            &lt;div class=&quot;bg-gradient-to-r from-indigo-50 via-purple-50 to-pink-50 rounded-2xl p-6 border-2 border-indigo-200&quot;&gt;
                &lt;h3 class=&quot;text-xl font-bold text-center gradient-text mb-6&quot;&gt;âœ¨ Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…&lt;/h3&gt;
                &lt;div class=&quot;grid md:grid-cols-3 gap-4&quot;&gt;
                    &lt;div class=&quot;flex items-center bg-white rounded-xl p-3 shadow-md&quot;&gt;
                        &lt;span class=&quot;text-2xl ml-3&quot;&gt;ğŸ§ &lt;/span&gt;
                        &lt;div&gt;
                            &lt;p class=&quot;font-bold text-gray-800 text-sm&quot;&gt;Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªÙ‚Ø¯Ù…&lt;/p&gt;
                            &lt;p class=&quot;text-xs text-gray-600&quot;&gt;Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø³Ø¦Ù„Ø© Ø°ÙƒÙŠØ© ÙˆÙ…ØªÙ†ÙˆØ¹Ø©&lt;/p&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;flex items-center bg-white rounded-xl p-3 shadow-md&quot;&gt;
                        &lt;span class=&quot;text-2xl ml-3&quot;&gt;ğŸ“Š&lt;/span&gt;
                        &lt;div&gt;
                            &lt;p class=&quot;font-bold text-gray-800 text-sm&quot;&gt;ØªØªØ¨Ø¹ Ø§Ù„ØªÙ‚Ø¯Ù…&lt;/p&gt;
                            &lt;p class=&quot;text-xs text-gray-600&quot;&gt;Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø¯Ø§Ø¡ ÙƒÙ„ Ø·Ø§Ù„Ø¨&lt;/p&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;flex items-center bg-white rounded-xl p-3 shadow-md&quot;&gt;
                        &lt;span class=&quot;text-2xl ml-3&quot;&gt;ğŸ¯&lt;/span&gt;
                        &lt;div&gt;
                            &lt;p class=&quot;font-bold text-gray-800 text-sm&quot;&gt;ØªØ¹Ù„Ù… ØªÙØ§Ø¹Ù„ÙŠ&lt;/p&gt;
                            &lt;p class=&quot;text-xs text-gray-600&quot;&gt;ØªØ¬Ø±Ø¨Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…Ù…ØªØ¹Ø©&lt;/p&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;

        &lt;!-- Connection Status --&gt;
        &lt;div class=&quot;section-card rounded-2xl shadow-xl p-6 mb-8 bounce-in&quot;&gt;
            &lt;div class=&quot;flex items-center justify-between&quot;&gt;
                &lt;div class=&quot;flex items-center&quot;&gt;
                    &lt;div id=&quot;connectionIndicator&quot; class=&quot;w-4 h-4 rounded-full bg-gray-400 ml-4 pulse-glow&quot;&gt;&lt;/div&gt;
                    &lt;div&gt;
                        &lt;span id=&quot;connectionStatus&quot; class=&quot;text-lg font-bold text-gray-700&quot;&gt;ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„...&lt;/span&gt;
                        &lt;p class=&quot;text-sm text-gray-500 mt-1&quot;&gt;Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ&lt;/p&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;button onclick=&quot;checkConnection()&quot; 
                        class=&quot;bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-xl font-bold hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg card-hover&quot;&gt;
                    &lt;span class=&quot;ml-2&quot;&gt;ğŸ”„&lt;/span&gt;
                    ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„
                &lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Card Generator --&gt;
        &lt;section class=&quot;section-card rounded-3xl shadow-2xl p-8 mb-8 fade-in&quot;&gt;
            &lt;div class=&quot;text-center mb-8&quot;&gt;
                &lt;div class=&quot;inline-flex items-center bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-3 rounded-2xl font-bold text-xl shadow-lg&quot;&gt;
                    &lt;span class=&quot;text-2xl ml-3&quot;&gt;ğŸ¯&lt;/span&gt;
                    Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©
                &lt;/div&gt;
                &lt;p class=&quot;text-gray-600 mt-3 text-lg&quot;&gt;Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…Ø®ØµØµØ©&lt;/p&gt;
            &lt;/div&gt;
            
            &lt;!-- Generation Mode Tabs --&gt;
            &lt;div class=&quot;flex mb-8 bg-gradient-to-r from-gray-100 to-gray-200 rounded-2xl p-2 shadow-inner&quot;&gt;
                &lt;button onclick=&quot;switchMode(&#039;ai&#039;)&quot; id=&quot;aiModeBtn&quot; 
                        class=&quot;flex-1 py-4 px-6 rounded-xl font-bold transition-all bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg&quot;&gt;
                    &lt;span class=&quot;text-xl ml-2&quot;&gt;ğŸ¤–&lt;/span&gt;
                    Ø§Ù„ØªÙˆÙ„ÙŠØ¯ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
                &lt;/button&gt;
                &lt;button onclick=&quot;switchMode(&#039;offline&#039;)&quot; id=&quot;offlineModeBtn&quot; 
                        class=&quot;flex-1 py-4 px-6 rounded-xl font-bold transition-all text-gray-600 hover:bg-white hover:shadow-md&quot;&gt;
                    &lt;span class=&quot;text-xl ml-2&quot;&gt;ğŸ“&lt;/span&gt;
                    Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„
                &lt;/button&gt;
            &lt;/div&gt;

            &lt;!-- AI Generation Mode --&gt;
            &lt;div id=&quot;aiMode&quot; class=&quot;bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 border-2 border-blue-200 mb-6&quot;&gt;
                &lt;div class=&quot;grid md:grid-cols-2 gap-6 mb-6&quot;&gt;
                    &lt;div&gt;
                        &lt;label class=&quot;block text-sm font-bold text-blue-700 mb-2&quot;&gt;Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø£Ùˆ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ&lt;/label&gt;
                        &lt;textarea id=&quot;topicOrText&quot; placeholder=&quot;Ø£Ø¯Ø®Ù„ Ù…ÙˆØ¶ÙˆØ¹ (Ù…Ø«Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§ØªØŒ Ø§Ù„Ø¹Ù„ÙˆÙ…) Ø£Ùˆ Ø§Ù„ØµÙ‚ Ù†Øµ ØªØ¹Ù„ÙŠÙ…ÙŠ ÙƒØ§Ù…Ù„...&quot; 
                                  class=&quot;w-full p-3 border-2 border-blue-200 rounded-xl focus:border-blue-500 resize-none&quot; rows=&quot;4&quot;&gt;&lt;/textarea&gt;
                        &lt;div class=&quot;flex justify-between items-center mt-2&quot;&gt;
                            &lt;span class=&quot;text-sm text-blue-600&quot;&gt;
                                Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª: &lt;span id=&quot;wordCount&quot;&gt;0&lt;/span&gt;
                            &lt;/span&gt;
                            &lt;button onclick=&quot;clearInput()&quot; 
                                    class=&quot;text-sm text-red-600 hover:text-red-800 font-bold&quot;&gt;
                                ğŸ—‘ï¸ Ù…Ø³Ø­
                            &lt;/button&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div&gt;
                        &lt;label class=&quot;block text-sm font-bold text-blue-700 mb-2&quot;&gt;Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª&lt;/label&gt;
                        &lt;select id=&quot;cardCount&quot; class=&quot;w-full p-3 border-2 border-blue-200 rounded-xl focus:border-blue-500 mb-4&quot;&gt;
                            &lt;option value=&quot;5&quot;&gt;5 Ø¨Ø·Ø§Ù‚Ø§Øª&lt;/option&gt;
                            &lt;option value=&quot;8&quot; selected&gt;8 Ø¨Ø·Ø§Ù‚Ø§Øª&lt;/option&gt;
                            &lt;option value=&quot;10&quot;&gt;10 Ø¨Ø·Ø§Ù‚Ø§Øª&lt;/option&gt;
                            &lt;option value=&quot;15&quot;&gt;15 Ø¨Ø·Ø§Ù‚Ø©&lt;/option&gt;
                            &lt;option value=&quot;20&quot;&gt;20 Ø¨Ø·Ø§Ù‚Ø©&lt;/option&gt;
                        &lt;/select&gt;
                        
                        &lt;label class=&quot;block text-sm font-bold text-blue-700 mb-2&quot;&gt;Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ&lt;/label&gt;
                        &lt;select id=&quot;educationLevel&quot; class=&quot;w-full p-3 border-2 border-blue-200 rounded-xl focus:border-blue-500&quot;&gt;
                            &lt;option value=&quot;elementary&quot;&gt;Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ&lt;/option&gt;
                            &lt;option value=&quot;middle&quot; selected&gt;Ù…ØªÙˆØ³Ø·&lt;/option&gt;
                            &lt;option value=&quot;high&quot;&gt;Ø«Ø§Ù†ÙˆÙŠ&lt;/option&gt;
                            &lt;option value=&quot;university&quot;&gt;Ø¬Ø§Ù…Ø¹ÙŠ&lt;/option&gt;
                        &lt;/select&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                
                &lt;!-- Advanced Options --&gt;
                &lt;div class=&quot;bg-white rounded-xl p-4 mb-6 border-2 border-blue-100&quot;&gt;
                    &lt;h3 class=&quot;font-bold text-blue-800 mb-4 flex items-center&quot;&gt;
                        &lt;span class=&quot;text-xl ml-2&quot;&gt;âš™ï¸&lt;/span&gt;
                        Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©
                    &lt;/h3&gt;
                    &lt;div class=&quot;grid md:grid-cols-3 gap-4&quot;&gt;
                        &lt;div&gt;
                            &lt;label class=&quot;block text-sm font-bold text-blue-700 mb-2&quot;&gt;Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙØµÙŠÙ„&lt;/label&gt;
                            &lt;select id=&quot;detailLevel&quot; class=&quot;w-full p-2 border-2 border-blue-200 rounded-lg focus:border-blue-500&quot;&gt;
                                &lt;option value=&quot;basic&quot;&gt;Ø£Ø³Ø§Ø³ÙŠ&lt;/option&gt;
                                &lt;option value=&quot;detailed&quot; selected&gt;Ù…ÙØµÙ„&lt;/option&gt;
                                &lt;option value=&quot;advanced&quot;&gt;Ù…ØªÙ‚Ø¯Ù…&lt;/option&gt;
                            &lt;/select&gt;
                        &lt;/div&gt;
                        &lt;div&gt;
                            &lt;label class=&quot;block text-sm font-bold text-blue-700 mb-2&quot;&gt;Ù†ÙˆØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©&lt;/label&gt;
                            &lt;select id=&quot;questionType&quot; class=&quot;w-full p-2 border-2 border-blue-200 rounded-lg focus:border-blue-500&quot;&gt;
                                &lt;option value=&quot;mixed&quot; selected&gt;Ù…ØªÙ†ÙˆØ¹&lt;/option&gt;
                                &lt;option value=&quot;definitions&quot;&gt;ØªØ¹Ø±ÙŠÙØ§Øª&lt;/option&gt;
                                &lt;option value=&quot;applications&quot;&gt;ØªØ·Ø¨ÙŠÙ‚Ø§Øª&lt;/option&gt;
                                &lt;option value=&quot;analysis&quot;&gt;ØªØ­Ù„ÙŠÙ„&lt;/option&gt;
                            &lt;/select&gt;
                        &lt;/div&gt;
                        &lt;div&gt;
                            &lt;label class=&quot;block text-sm font-bold text-blue-700 mb-2&quot;&gt;Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰&lt;/label&gt;
                            &lt;select id=&quot;focusType&quot; class=&quot;w-full p-2 border-2 border-blue-200 rounded-lg focus:border-blue-500&quot;&gt;
                                &lt;option value=&quot;comprehensive&quot; selected&gt;Ø´Ø§Ù…Ù„&lt;/option&gt;
                                &lt;option value=&quot;concepts&quot;&gt;Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©&lt;/option&gt;
                                &lt;option value=&quot;details&quot;&gt;Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„Ø­Ù‚Ø§Ø¦Ù‚&lt;/option&gt;
                                &lt;option value=&quot;applications&quot;&gt;Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©&lt;/option&gt;
                            &lt;/select&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                
                &lt;div class=&quot;grid md:grid-cols-2 gap-6&quot;&gt;
                    &lt;button onclick=&quot;generateCards()&quot; id=&quot;generateBtn&quot; 
                            class=&quot;bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 px-8 rounded-2xl font-bold text-lg hover:from-blue-700 hover:to-purple-700 transition-all shadow-xl card-hover pulse-glow&quot;&gt;
                        &lt;span class=&quot;text-2xl ml-3&quot;&gt;ğŸš€&lt;/span&gt;
                        Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
                    &lt;/button&gt;
                    &lt;button onclick=&quot;generatePrompt()&quot; id=&quot;promptBtn&quot; 
                            class=&quot;bg-gradient-to-r from-green-600 to-emerald-600 text-white py-4 px-8 rounded-2xl font-bold text-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-xl card-hover&quot;&gt;
                        &lt;span class=&quot;text-2xl ml-3&quot;&gt;ğŸ“&lt;/span&gt;
                        Ø¥Ù†Ø´Ø§Ø¡ Ù†Øµ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ
                    &lt;/button&gt;
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;!-- Offline Processing Mode --&gt;
            &lt;div id=&quot;offlineMode&quot; class=&quot;bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border-2 border-green-200 mb-6 hidden&quot;&gt;
                &lt;div class=&quot;mb-6&quot;&gt;
                    &lt;label class=&quot;block text-sm font-bold text-green-700 mb-2&quot;&gt;Ø§Ù„Ù†Øµ Ø§Ù„Ù…ÙÙˆÙ„Ø¯ Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ&lt;/label&gt;
                    &lt;textarea id=&quot;aiGeneratedText&quot; placeholder=&quot;Ø§Ù„ØµÙ‚ Ù‡Ù†Ø§ Ø§Ù„Ù†Øµ Ø§Ù„Ø°ÙŠ Ø­ØµÙ„Øª Ø¹Ù„ÙŠÙ‡ Ù…Ù† ChatGPT Ø£Ùˆ Gemini Ø£Ùˆ Ø£ÙŠ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¢Ø®Ø±...&quot; 
                              class=&quot;w-full p-4 border-2 border-green-200 rounded-xl focus:border-green-500 resize-none&quot; rows=&quot;8&quot;&gt;&lt;/textarea&gt;
                    &lt;div class=&quot;flex justify-between items-center mt-2&quot;&gt;
                        &lt;span class=&quot;text-sm text-green-600&quot;&gt;
                            Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù: &lt;span id=&quot;aiTextCount&quot;&gt;0&lt;/span&gt;
                        &lt;/span&gt;
                        &lt;button onclick=&quot;clearAiText()&quot; 
                                class=&quot;text-sm text-red-600 hover:text-red-800 font-bold&quot;&gt;
                            ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ù†Øµ
                        &lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                
                &lt;button onclick=&quot;processAiText()&quot; id=&quot;processBtn&quot; 
                        class=&quot;w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 px-6 rounded-xl font-bold text-lg hover:from-green-700 hover:to-emerald-700 transition-all&quot;&gt;
                    âš¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Øµ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
                &lt;/button&gt;
            &lt;/div&gt;

            &lt;!-- Generated Prompt Display --&gt;
            &lt;div id=&quot;promptDisplay&quot; class=&quot;bg-yellow-50 rounded-2xl p-6 border-2 border-yellow-200 mb-6 hidden&quot;&gt;
                &lt;h3 class=&quot;font-bold text-yellow-800 mb-4 flex items-center&quot;&gt;
                    &lt;span class=&quot;text-xl ml-2&quot;&gt;ğŸ“‹&lt;/span&gt;
                    Ø§Ù„Ù†Øµ Ø§Ù„Ù…ÙÙˆÙ„Ø¯ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ
                &lt;/h3&gt;
                &lt;div class=&quot;bg-white rounded-xl p-4 border-2 border-yellow-100 mb-4&quot;&gt;
                    &lt;textarea id=&quot;generatedPrompt&quot; readonly 
                              class=&quot;w-full p-3 border-none resize-none bg-transparent&quot; rows=&quot;8&quot;&gt;&lt;/textarea&gt;
                &lt;/div&gt;
                &lt;div class=&quot;flex gap-4&quot;&gt;
                    &lt;button onclick=&quot;copyPrompt()&quot; 
                            class=&quot;bg-yellow-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-yellow-700 transition-all&quot;&gt;
                        ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ù†Øµ
                    &lt;/button&gt;
                    &lt;button onclick=&quot;hidePrompt()&quot; 
                            class=&quot;bg-gray-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-700 transition-all&quot;&gt;
                        âŒ Ø¥Ø®ÙØ§Ø¡
                    &lt;/button&gt;
                &lt;/div&gt;
                &lt;div class=&quot;mt-4 p-4 bg-blue-50 rounded-xl border-2 border-blue-200&quot;&gt;
                    &lt;p class=&quot;text-sm text-blue-700 font-bold mb-2&quot;&gt;ğŸ“Œ ØªØ¹Ù„ÙŠÙ…Ø§Øª:&lt;/p&gt;
                    &lt;ol class=&quot;text-sm text-blue-600 space-y-1&quot;&gt;
                        &lt;li&gt;1. Ø§Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø£Ø¹Ù„Ø§Ù‡&lt;/li&gt;
                        &lt;li&gt;2. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ ChatGPT Ø£Ùˆ Gemini Ø£Ùˆ Ø£ÙŠ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ&lt;/li&gt;
                        &lt;li&gt;3. Ø§Ù„ØµÙ‚ Ø§Ù„Ù†Øµ ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©&lt;/li&gt;
                        &lt;li&gt;4. Ø§Ù†Ø³Ø® Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ§Ø±Ø¬Ø¹ Ù‡Ù†Ø§&lt;/li&gt;
                        &lt;li&gt;5. Ø§Ø®ØªØ± &quot;Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„&quot; ÙˆØ§Ù„ØµÙ‚ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©&lt;/li&gt;
                    &lt;/ol&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;

        &lt;!-- Manual Card Addition --&gt;
        &lt;section class=&quot;bg-white rounded-2xl shadow-xl p-6 mb-8&quot;&gt;
            &lt;h2 class=&quot;text-xl font-bold text-gray-800 mb-6 flex items-center&quot;&gt;
                &lt;span class=&quot;text-2xl ml-3&quot;&gt;âœï¸&lt;/span&gt;
                Ø¥Ø¶Ø§ÙØ© Ø¨Ø·Ø§Ù‚Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹
            &lt;/h2&gt;
            
            &lt;div class=&quot;grid md:grid-cols-2 gap-6 mb-4&quot;&gt;
                &lt;div&gt;
                    &lt;label class=&quot;block text-sm font-bold text-gray-700 mb-2&quot;&gt;Ø§Ù„Ø³Ø¤Ø§Ù„&lt;/label&gt;
                    &lt;textarea id=&quot;manualQuestion&quot; placeholder=&quot;Ø§ÙƒØªØ¨ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù‡Ù†Ø§...&quot; 
                              class=&quot;w-full p-3 border-2 border-gray-200 rounded-xl focus:border-green-500 resize-none&quot; rows=&quot;3&quot;&gt;&lt;/textarea&gt;
                &lt;/div&gt;
                &lt;div&gt;
                    &lt;label class=&quot;block text-sm font-bold text-gray-700 mb-2&quot;&gt;Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©&lt;/label&gt;
                    &lt;textarea id=&quot;manualAnswer&quot; placeholder=&quot;Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡Ù†Ø§...&quot; 
                              class=&quot;w-full p-3 border-2 border-gray-200 rounded-xl focus:border-green-500 resize-none&quot; rows=&quot;3&quot;&gt;&lt;/textarea&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;button onclick=&quot;addManualCard()&quot; 
                    class=&quot;w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 px-6 rounded-xl font-bold text-lg hover:from-green-700 hover:to-emerald-700 transition-all&quot;&gt;
                â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
            &lt;/button&gt;
        &lt;/section&gt;

        &lt;!-- Student Management --&gt;
        &lt;section class=&quot;section-card rounded-3xl shadow-2xl p-8 mb-8 fade-in&quot;&gt;
            &lt;div class=&quot;text-center mb-8&quot;&gt;
                &lt;div class=&quot;inline-flex items-center bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-2xl font-bold text-xl shadow-lg&quot;&gt;
                    &lt;span class=&quot;text-2xl ml-3&quot;&gt;ğŸ‘¥&lt;/span&gt;
                    Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨
                &lt;/div&gt;
                &lt;p class=&quot;text-gray-600 mt-3 text-lg&quot;&gt;Ø£Ø¶Ù Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØªØªØ¨Ø¹ ØªÙ‚Ø¯Ù…Ù‡Ù… ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù…&lt;/p&gt;
            &lt;/div&gt;
            
            &lt;!-- Single Student Addition --&gt;
            &lt;div class=&quot;flex gap-4 mb-6&quot;&gt;
                &lt;input type=&quot;text&quot; id=&quot;studentName&quot; placeholder=&quot;Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨&quot; 
                       class=&quot;flex-1 p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500&quot;&gt;
                &lt;button onclick=&quot;addStudent()&quot; 
                        class=&quot;bg-blue-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-700 transition-all&quot;&gt;
                    Ø¥Ø¶Ø§ÙØ©
                &lt;/button&gt;
            &lt;/div&gt;
            
            &lt;!-- Bulk Student Addition --&gt;
            &lt;div class=&quot;bg-green-50 rounded-xl p-4 mb-6 border-2 border-green-200&quot;&gt;
                &lt;h3 class=&quot;font-bold text-green-800 mb-4 flex items-center&quot;&gt;
                    &lt;span class=&quot;text-xl ml-2&quot;&gt;ğŸ‘¥&lt;/span&gt;
                    Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø© Ø·Ù„Ø§Ø¨
                &lt;/h3&gt;
                &lt;div class=&quot;mb-4&quot;&gt;
                    &lt;label class=&quot;block text-sm font-bold text-green-700 mb-2&quot;&gt;Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø·Ù„Ø§Ø¨ (ÙƒÙ„ Ø§Ø³Ù… ÙÙŠ Ø³Ø·Ø± Ù…Ù†ÙØµÙ„)&lt;/label&gt;
                    &lt;textarea id=&quot;bulkStudents&quot; placeholder=&quot;Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯&amp;#10;ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ&amp;#10;Ù…Ø­Ù…Ø¯ Ø³Ø§Ù„Ù…&amp;#10;Ù†ÙˆØ± Ø§Ù„Ù‡Ø¯Ù‰&amp;#10;Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø£Ø­Ù…Ø¯&quot; 
                              class=&quot;w-full p-3 border-2 border-green-200 rounded-xl focus:border-green-500 resize-none&quot; rows=&quot;5&quot;&gt;&lt;/textarea&gt;
                &lt;/div&gt;
                &lt;div class=&quot;flex gap-4&quot;&gt;
                    &lt;button onclick=&quot;addBulkStudents()&quot; 
                            class=&quot;bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-all&quot;&gt;
                        â• Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨
                    &lt;/button&gt;
                    &lt;button onclick=&quot;generateRandomStudents()&quot; 
                            class=&quot;bg-purple-600 text-white px-4 py-3 rounded-xl font-bold hover:bg-purple-700 transition-all&quot;&gt;
                        ğŸ² Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø§Ø¨ ØªØ¬Ø±ÙŠØ¨ÙŠÙŠÙ†
                    &lt;/button&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div id=&quot;studentsList&quot; class=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;&lt;/div&gt;
        &lt;/section&gt;

        &lt;!-- Flashcards Display --&gt;
        &lt;section id=&quot;cardsSection&quot; class=&quot;section-card rounded-3xl shadow-2xl p-8 mb-8 hidden fade-in&quot;&gt;
            &lt;div class=&quot;text-center mb-8&quot;&gt;
                &lt;div class=&quot;inline-flex items-center bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-3 rounded-2xl font-bold text-xl shadow-lg&quot;&gt;
                    &lt;span class=&quot;text-2xl ml-3&quot;&gt;ğŸ“š&lt;/span&gt;
                    Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©
                &lt;/div&gt;
                &lt;p class=&quot;text-gray-600 mt-3 text-lg&quot;&gt;Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ù„Ù‚Ù„Ø¨Ù‡Ø§ ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class=&quot;flex justify-between items-center mb-8&quot;&gt;
                &lt;div class=&quot;flex items-center gap-4&quot;&gt;
                    &lt;select id=&quot;studentSelect&quot; onchange=&quot;switchStudent()&quot; 
                            class=&quot;p-2 border-2 border-gray-200 rounded-lg&quot;&gt;
                        &lt;option value=&quot;&quot;&gt;Ø§Ø®ØªØ± Ø§Ù„Ø·Ø§Ù„Ø¨&lt;/option&gt;
                    &lt;/select&gt;
                    &lt;span id=&quot;cardCounter&quot; class=&quot;bg-gray-100 px-3 py-1 rounded-full text-sm font-bold&quot;&gt;0 Ø¨Ø·Ø§Ù‚Ø©&lt;/span&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div id=&quot;flashcardsContainer&quot; class=&quot;grid md:grid-cols-2 lg:grid-cols-3 gap-6&quot;&gt;&lt;/div&gt;
        &lt;/section&gt;

        &lt;!-- Quiz Section --&gt;
        &lt;section id=&quot;quizSection&quot; class=&quot;section-card rounded-3xl shadow-2xl p-8 mb-8 hidden fade-in&quot;&gt;
            &lt;div class=&quot;text-center mb-8&quot;&gt;
                &lt;div class=&quot;inline-flex items-center bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 py-3 rounded-2xl font-bold text-xl shadow-lg&quot;&gt;
                    &lt;span class=&quot;text-2xl ml-3&quot;&gt;ğŸ¯&lt;/span&gt;
                    Ø§Ø®ØªØ¨Ø§Ø± ØªÙØ§Ø¹Ù„ÙŠ
                &lt;/div&gt;
                &lt;p class=&quot;text-gray-600 mt-3 text-lg&quot;&gt;Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù‚Ø§Ø·&lt;/p&gt;
            &lt;/div&gt;
            
            &lt;div id=&quot;quizControls&quot;&gt;
                &lt;div class=&quot;grid md:grid-cols-2 gap-4 mb-4&quot;&gt;
                    &lt;select id=&quot;quizStudentSelect&quot; class=&quot;p-3 border-2 border-gray-200 rounded-xl&quot;&gt;
                        &lt;option value=&quot;&quot;&gt;Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨&lt;/option&gt;
                    &lt;/select&gt;
                    &lt;button onclick=&quot;startQuiz()&quot; 
                            class=&quot;bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 px-6 rounded-xl font-bold hover:from-purple-700 hover:to-pink-700 transition-all&quot;&gt;
                        ğŸ® Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                    &lt;/button&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div id=&quot;quizGame&quot; class=&quot;hidden&quot;&gt;
                &lt;div class=&quot;mb-6&quot;&gt;
                    &lt;div class=&quot;flex justify-between items-center mb-4&quot;&gt;
                        &lt;span class=&quot;font-bold&quot;&gt;Ø§Ù„Ø³Ø¤Ø§Ù„ &lt;span id=&quot;currentQuestionNum&quot;&gt;1&lt;/span&gt; Ù…Ù† &lt;span id=&quot;totalQuestions&quot;&gt;5&lt;/span&gt;&lt;/span&gt;
                        &lt;span class=&quot;font-bold text-blue-600&quot;&gt;Ø§Ù„Ù†Ù‚Ø§Ø·: &lt;span id=&quot;currentScore&quot;&gt;0&lt;/span&gt;&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;w-full bg-gray-200 rounded-full h-2&quot;&gt;
                        &lt;div id=&quot;progressBar&quot; class=&quot;bg-blue-600 h-2 rounded-full transition-all&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                
                &lt;div class=&quot;bg-gray-50 rounded-xl p-6 mb-6&quot;&gt;
                    &lt;div id=&quot;questionText&quot; class=&quot;text-lg font-bold text-center mb-6&quot;&gt;&lt;/div&gt;
                    &lt;div id=&quot;answerOptions&quot; class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4&quot;&gt;&lt;/div&gt;
                &lt;/div&gt;
                
                &lt;div id=&quot;questionFeedback&quot; class=&quot;hidden mb-6&quot;&gt;&lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;

        &lt;!-- Leaderboard --&gt;
        &lt;section class=&quot;section-card rounded-3xl shadow-2xl p-8 fade-in&quot;&gt;
            &lt;div class=&quot;text-center mb-8&quot;&gt;
                &lt;div class=&quot;inline-flex items-center bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-3 rounded-2xl font-bold text-xl shadow-lg&quot;&gt;
                    &lt;span class=&quot;text-2xl ml-3&quot;&gt;ğŸ†&lt;/span&gt;
                    Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
                &lt;/div&gt;
                &lt;p class=&quot;text-gray-600 mt-3 text-lg&quot;&gt;ØªÙ†Ø§ÙØ³ Ù…Ø¹ Ø²Ù…Ù„Ø§Ø¦Ùƒ ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù‚Ø§Ø·&lt;/p&gt;
            &lt;/div&gt;
            &lt;div id=&quot;leaderboardContent&quot;&gt;
                &lt;div class=&quot;text-center py-8 text-gray-500&quot;&gt;
                    &lt;div class=&quot;text-4xl mb-4&quot;&gt;ğŸ“Š&lt;/div&gt;
                    &lt;p class=&quot;text-lg&quot;&gt;Ø£Ø¶Ù Ø·Ù„Ø§Ø¨Ø§Ù‹ ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬&lt;/p&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
    &lt;/div&gt;

    &lt;script&gt;
        // Global Variables
        let students = [];
        let flashcards = [];
        let currentQuiz = [];
        let currentQuestionIndex = 0;
        let studentScores = {};
        let currentScore = 0;
        let currentStudent = null;
        let connectionStatus = &#039;unknown&#039;;
        
        // Gemini AI Configuration
        const GEMINI_API_KEY = &#039;AIzaSyAm0qEdFT7nXSNAl4nHmCi8DBbuYAoAW7o&#039;;
        const GEMINI_API_URL = &#039;https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent&#039;;
        
        // Initialize on page load
        document.addEventListener(&#039;DOMContentLoaded&#039;, function() {
            updateWordCount();
            checkConnection();
            
            // Add event listeners
            const topicTextArea = document.getElementById(&#039;topicOrText&#039;);
            if (topicTextArea) {
                topicTextArea.addEventListener(&#039;input&#039;, updateWordCount);
            }
            
            const aiTextArea = document.getElementById(&#039;aiGeneratedText&#039;);
            if (aiTextArea) {
                aiTextArea.addEventListener(&#039;input&#039;, updateAiTextCount);
            }
        });

        // Notification System
        function showNotification(message, type = &#039;info&#039;) {
            const notification = document.createElement(&#039;div&#039;);
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                &lt;span&gt;${message}&lt;/span&gt;
                &lt;button onclick=&quot;this.parentElement.remove()&quot; class=&quot;ml-4 text-xl&quot;&gt;&amp;times;&lt;/button&gt;
            `;
            document.body.appendChild(notification);
            setTimeout(() =&gt; notification.remove(), 4000);
        }

        // Modal System
        function showGenerationModal() {
            const modal = document.createElement(&#039;div&#039;);
            modal.className = &#039;modal-overlay&#039;;
            modal.innerHTML = `
                &lt;div class=&quot;modal-content&quot;&gt;
                    &lt;div class=&quot;text-6xl mb-4&quot;&gt;ğŸ¤–&lt;/div&gt;
                    &lt;h2 class=&quot;text-2xl font-bold text-gray-800 mb-4&quot;&gt;Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª&lt;/h2&gt;
                    &lt;div class=&quot;inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4&quot;&gt;&lt;/div&gt;
                    &lt;p class=&quot;text-gray-600 mb-6&quot;&gt;ÙŠØªÙ… Ø§Ù„Ø¢Ù† Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…Ø®ØµØµØ© Ù„Ùƒ...&lt;/p&gt;
                    &lt;div class=&quot;bg-blue-50 rounded-xl p-4 border-2 border-blue-200&quot;&gt;
                        &lt;p class=&quot;text-sm text-blue-700 font-bold&quot;&gt;ğŸ’¡ Ù†ØµÙŠØ­Ø©:&lt;/p&gt;
                        &lt;p class=&quot;text-sm text-blue-600 mt-1&quot;&gt;ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø§Ø¨ ÙˆØ¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª!&lt;/p&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            `;
            document.body.appendChild(modal);
            return modal;
        }

        function showSuccessModal(cardCount) {
            const modal = document.createElement(&#039;div&#039;);
            modal.className = &#039;modal-overlay&#039;;
            modal.innerHTML = `
                &lt;div class=&quot;modal-content&quot;&gt;
                    &lt;div class=&quot;text-6xl mb-4&quot;&gt;ğŸ‰&lt;/div&gt;
                    &lt;h2 class=&quot;text-2xl font-bold text-green-800 mb-4&quot;&gt;ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!&lt;/h2&gt;
                    &lt;p class=&quot;text-lg text-gray-700 mb-6&quot;&gt;ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ &lt;strong&gt;${cardCount}&lt;/strong&gt; Ø¨Ø·Ø§Ù‚Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…&lt;/p&gt;
                    
                    &lt;div class=&quot;bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-4 border-2 border-green-200 mb-6&quot;&gt;
                        &lt;h3 class=&quot;font-bold text-green-800 mb-3&quot;&gt;Ù…Ø§Ø°Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ÙØ¹Ù„Ù‡ Ø§Ù„Ø¢Ù†ØŸ&lt;/h3&gt;
                        &lt;div class=&quot;grid grid-cols-1 gap-2 text-sm&quot;&gt;
                            &lt;div class=&quot;flex items-center text-green-700&quot;&gt;
                                &lt;span class=&quot;ml-2&quot;&gt;ğŸ“š&lt;/span&gt;
                                &lt;span&gt;Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆØ§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹Ù‡Ø§&lt;/span&gt;
                            &lt;/div&gt;
                            &lt;div class=&quot;flex items-center text-blue-700&quot;&gt;
                                &lt;span class=&quot;ml-2&quot;&gt;ğŸ‘¥&lt;/span&gt;
                                &lt;span&gt;Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø§Ø¨ Ù„ØªØªØ¨Ø¹ ØªÙ‚Ø¯Ù…Ù‡Ù…&lt;/span&gt;
                            &lt;/div&gt;
                            &lt;div class=&quot;flex items-center text-purple-700&quot;&gt;
                                &lt;span class=&quot;ml-2&quot;&gt;ğŸ¯&lt;/span&gt;
                                &lt;span&gt;Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± ØªÙØ§Ø¹Ù„ÙŠ&lt;/span&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    
                    &lt;div class=&quot;bg-gray-50 rounded-xl p-4 mb-6&quot;&gt;
                        &lt;p class=&quot;text-xs text-gray-600 mb-2&quot;&gt;ØªØ·ÙˆÙŠØ±: Ø£. Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ù†ØµØ± Ø§Ù„Ù„Ù‡&lt;/p&gt;
                        &lt;div class=&quot;flex justify-center space-x-4 space-x-reverse&quot;&gt;
                            &lt;a href=&quot;https://www.instagram.com/nasrallah_2002/&quot; target=&quot;_blank&quot; 
                               class=&quot;text-pink-600 hover:text-pink-800 text-sm font-bold&quot;&gt;
                                ğŸ“· Instagram
                            &lt;/a&gt;
                            &lt;a href=&quot;https://www.youtube.com/@tnasrallah&quot; target=&quot;_blank&quot; 
                               class=&quot;text-red-600 hover:text-red-800 text-sm font-bold&quot;&gt;
                                ğŸ“º YouTube
                            &lt;/a&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    
                    &lt;button onclick=&quot;closeModal()&quot; 
                            class=&quot;bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-8 rounded-xl font-bold hover:from-green-700 hover:to-blue-700 transition-all&quot;&gt;
                        Ù…Ù…ØªØ§Ø²! Ù„Ù†Ø¨Ø¯Ø£ Ø§Ù„ØªØ¹Ù„Ù… ğŸš€
                    &lt;/button&gt;
                &lt;/div&gt;
            `;
            document.body.appendChild(modal);
            return modal;
        }

        function closeModal() {
            const modals = document.querySelectorAll(&#039;.modal-overlay&#039;);
            modals.forEach(modal =&gt; modal.remove());
        }



        // AI Integration
        async function callGeminiAPI(prompt) {
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() =&gt; controller.abort(), 30000);
                
                const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
                    method: &#039;POST&#039;,
                    headers: { &#039;Content-Type&#039;: &#039;application/json&#039; },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        generationConfig: {
                            temperature: 0.7,
                            topK: 40,
                            topP: 0.95,
                            maxOutputTokens: 2000,
                        }
                    }),
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (!data.candidates?.[0]?.content?.parts?.[0]?.text) {
                    throw new Error(&#039;Invalid response structure&#039;);
                }
                
                return data.candidates[0].content.parts[0].text;
            } catch (error) {
                console.error(&#039;Gemini API Error:&#039;, error);
                throw error;
            }
        }

        // Parse AI Response - Enhanced Version
        function parseFlashcardsFromResponse(response) {
            const cards = [];
            
            // Clean the response
            let cleanedResponse = response.replace(/\*\*/g, &#039;&#039;).replace(/\*/g, &#039;&#039;).trim();
            
            // Try multiple parsing methods
            
            // Method 1: Standard Q&amp;A format
            let method1Cards = parseMethod1(cleanedResponse);
            if (method1Cards.length &gt; 0) {
                return method1Cards;
            }
            
            // Method 2: Numbered format
            let method2Cards = parseMethod2(cleanedResponse);
            if (method2Cards.length &gt; 0) {
                return method2Cards;
            }
            
            // Method 3: Simple line-by-line
            let method3Cards = parseMethod3(cleanedResponse);
            if (method3Cards.length &gt; 0) {
                return method3Cards;
            }
            
            // Method 4: JSON-like format
            let method4Cards = parseMethod4(cleanedResponse);
            if (method4Cards.length &gt; 0) {
                return method4Cards;
            }
            
            // Method 5: Any text with question marks
            let method5Cards = parseMethod5(cleanedResponse);
            return method5Cards;
        }
        
        // Method 1: Standard Ø³/Ø¬ format
        function parseMethod1(text) {
            const cards = [];
            const lines = text.split(&#039;\n&#039;).filter(line =&gt; line.trim());
            
            let currentCard = {};
            
            for (let line of lines) {
                line = line.trim();
                if (!line) continue;
                
                // Question patterns
                if (line.match(/^(Ø³\d*[\:\-\.]|Ø§Ù„Ø³Ø¤Ø§Ù„|Question|\d+[\.\-\)])/i) || 
                    (line.includes(&#039;ØŸ&#039;) &amp;&amp; !currentCard.question)) {
                    
                    if (currentCard.question &amp;&amp; currentCard.answer) {
                        cards.push({...currentCard});
                    }
                    
                    currentCard = {
                        question: line.replace(/^(Ø³\d*[\:\-\.]|Ø§Ù„Ø³Ø¤Ø§Ù„\s*\d*[\:\-\.]?|\d+[\.\-\)])/i, &#039;&#039;).trim(),
                        answer: &#039;&#039;
                    };
                }
                // Answer patterns
                else if (line.match(/^(Ø¬\d*[\:\-\.]|Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©|Ø§Ù„Ø¬ÙˆØ§Ø¨|Answer)/i)) {
                    if (currentCard.question) {
                        currentCard.answer = line.replace(/^(Ø¬\d*[\:\-\.]|Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©[\:\-\.]?|Ø§Ù„Ø¬ÙˆØ§Ø¨[\:\-\.]?)/i, &#039;&#039;).trim();
                    }
                }
                // Continue answer
                else if (currentCard.question &amp;&amp; currentCard.answer &amp;&amp; !line.match(/^(Ø³\d*|Ø§Ù„Ø³Ø¤Ø§Ù„)/i)) {
                    currentCard.answer += &#039; &#039; + line;
                }
            }
            
            if (currentCard.question &amp;&amp; currentCard.answer) {
                cards.push(currentCard);
            }
            
            return cards.filter(card =&gt; card.question.length &gt; 3 &amp;&amp; card.answer.length &gt; 2);
        }
        
        // Method 2: Numbered format (1. Question / Answer)
        function parseMethod2(text) {
            const cards = [];
            const sections = text.split(/\d+[\.\-\)]/);
            
            for (let section of sections) {
                section = section.trim();
                if (!section) continue;
                
                const lines = section.split(&#039;\n&#039;).filter(line =&gt; line.trim());
                if (lines.length &gt;= 2) {
                    const question = lines[0].trim();
                    const answer = lines.slice(1).join(&#039; &#039;).trim();
                    
                    if (question.length &gt; 3 &amp;&amp; answer.length &gt; 2) {
                        cards.push({ question, answer });
                    }
                }
            }
            
            return cards;
        }
        
        // Method 3: Simple alternating lines
        function parseMethod3(text) {
            const cards = [];
            const lines = text.split(&#039;\n&#039;).filter(line =&gt; line.trim());
            
            for (let i = 0; i &lt; lines.length - 1; i += 2) {
                const question = lines[i].trim();
                const answer = lines[i + 1].trim();
                
                if (question.length &gt; 3 &amp;&amp; answer.length &gt; 2) {
                    cards.push({ question, answer });
                }
            }
            
            return cards;
        }
        
        // Method 4: JSON-like or structured format
        function parseMethod4(text) {
            const cards = [];
            
            // Try to find patterns like &quot;Question: ... Answer: ...&quot;
            const matches = text.match(/(?:Question|Ø§Ù„Ø³Ø¤Ø§Ù„|Ø³)\s*:?\s*([^:]+?)(?:Answer|Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©|Ø§Ù„Ø¬ÙˆØ§Ø¨|Ø¬)\s*:?\s*([^:]+?)(?=(?:Question|Ø§Ù„Ø³Ø¤Ø§Ù„|Ø³)|$)/gi);
            
            if (matches) {
                matches.forEach(match =&gt; {
                    const parts = match.split(/(?:Answer|Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©|Ø§Ù„Ø¬ÙˆØ§Ø¨|Ø¬)\s*:?\s*/i);
                    if (parts.length &gt;= 2) {
                        const question = parts[0].replace(/(?:Question|Ø§Ù„Ø³Ø¤Ø§Ù„|Ø³)\s*:?\s*/i, &#039;&#039;).trim();
                        const answer = parts[1].trim();
                        
                        if (question.length &gt; 3 &amp;&amp; answer.length &gt; 2) {
                            cards.push({ question, answer });
                        }
                    }
                });
            }
            
            return cards;
        }
        
        // Method 5: Extract any text with question marks
        function parseMethod5(text) {
            const cards = [];
            const sentences = text.split(/[.!ØŸ?]/).filter(s =&gt; s.trim());
            
            let currentQuestion = &#039;&#039;;
            
            for (let sentence of sentences) {
                sentence = sentence.trim();
                if (!sentence) continue;
                
                if (sentence.includes(&#039;ØŸ&#039;) || sentence.includes(&#039;?&#039;)) {
                    currentQuestion = sentence + &#039;ØŸ&#039;;
                } else if (currentQuestion &amp;&amp; sentence.length &gt; 5) {
                    cards.push({
                        question: currentQuestion,
                        answer: sentence
                    });
                    currentQuestion = &#039;&#039;;
                }
            }
            
            return cards;
        }

        // Word Count Update
        function updateWordCount() {
            const textArea = document.getElementById(&#039;topicOrText&#039;);
            const wordCountSpan = document.getElementById(&#039;wordCount&#039;);
            
            if (textArea &amp;&amp; wordCountSpan) {
                const text = textArea.value.trim();
                const wordCount = text ? text.split(/\s+/).length : 0;
                wordCountSpan.textContent = wordCount;
            }
        }

        // Clear Input
        function clearInput() {
            document.getElementById(&#039;topicOrText&#039;).value = &#039;&#039;;
            updateWordCount();
            showNotification(&#039;ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù†Øµ&#039;, &#039;info&#039;);
        }

        // Connection Check
        async function checkConnection() {
            const indicator = document.getElementById(&#039;connectionIndicator&#039;);
            const status = document.getElementById(&#039;connectionStatus&#039;);
            
            indicator.className = &#039;w-4 h-4 rounded-full bg-yellow-400 ml-4 pulse-glow&#039;;
            status.textContent = &#039;Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„...&#039;;
            
            try {
                const response = await fetch(&#039;https://www.google.com&#039;, { 
                    method: &#039;HEAD&#039;, 
                    mode: &#039;no-cors&#039;,
                    cache: &#039;no-cache&#039;
                });
                
                indicator.className = &#039;w-4 h-4 rounded-full bg-green-400 ml-4 pulse-glow&#039;;
                status.textContent = &#039;âœ… Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª - Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„&#039;;
                connectionStatus = &#039;connected&#039;;
            } catch (error) {
                indicator.className = &#039;w-4 h-4 rounded-full bg-red-400 ml-4 pulse-glow&#039;;
                status.textContent = &#039;âŒ ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª&#039;;
                connectionStatus = &#039;disconnected&#039;;
            }
        }

        // Mode Switching
        function switchMode(mode) {
            const aiMode = document.getElementById(&#039;aiMode&#039;);
            const offlineMode = document.getElementById(&#039;offlineMode&#039;);
            const aiModeBtn = document.getElementById(&#039;aiModeBtn&#039;);
            const offlineModeBtn = document.getElementById(&#039;offlineModeBtn&#039;);
            
            if (mode === &#039;ai&#039;) {
                aiMode.classList.remove(&#039;hidden&#039;);
                offlineMode.classList.add(&#039;hidden&#039;);
                aiModeBtn.className = &#039;flex-1 py-4 px-6 rounded-xl font-bold transition-all bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg&#039;;
                offlineModeBtn.className = &#039;flex-1 py-4 px-6 rounded-xl font-bold transition-all text-gray-600 hover:bg-white hover:shadow-md&#039;;
            } else {
                aiMode.classList.add(&#039;hidden&#039;);
                offlineMode.classList.remove(&#039;hidden&#039;);
                aiModeBtn.className = &#039;flex-1 py-4 px-6 rounded-xl font-bold transition-all text-gray-600 hover:bg-white hover:shadow-md&#039;;
                offlineModeBtn.className = &#039;flex-1 py-4 px-6 rounded-xl font-bold transition-all bg-gradient-to-r from-green-600 to-emerald-600 text-white shadow-lg&#039;;
            }
        }

        // Generate Prompt for External AI
        function generatePrompt() {
            const input = document.getElementById(&#039;topicOrText&#039;).value.trim();
            const count = parseInt(document.getElementById(&#039;cardCount&#039;).value);
            const educationLevel = document.getElementById(&#039;educationLevel&#039;).value;
            const detailLevel = document.getElementById(&#039;detailLevel&#039;).value;
            const questionType = document.getElementById(&#039;questionType&#039;).value;
            const focusType = document.getElementById(&#039;focusType&#039;).value;
            
            if (!input) {
                showNotification(&#039;ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø£Ùˆ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ø£ÙˆÙ„Ø§Ù‹&#039;, &#039;error&#039;);
                return;
            }
            
            // Map values to Arabic descriptions
            const levelMap = {
                &#039;elementary&#039;: &#039;Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© - Ø£Ø³Ø¦Ù„Ø© Ø¨Ø³ÙŠØ·Ø© ÙˆÙ…Ø¨Ø§Ø´Ø±Ø©&#039;,
                &#039;middle&#039;: &#039;Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© - Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„ØªØ¹Ù‚ÙŠØ¯&#039;,
                &#039;high&#039;: &#039;Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© - Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆÙ…Ø¹Ù…Ù‚Ø©&#039;,
                &#039;university&#039;: &#039;Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ© - Ø£Ø³Ø¦Ù„Ø© Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù…ØªØ®ØµØµØ©&#039;
            };
            
            const detailMap = {
                &#039;basic&#039;: &#039;Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© ÙˆÙ…Ø¨Ø³Ø·Ø©&#039;,
                &#039;detailed&#039;: &#039;Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ÙØµÙ„Ø© ÙˆØ´Ø§Ù…Ù„Ø©&#039;,
                &#039;advanced&#039;: &#039;Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆÙ…Ø¹Ù…Ù‚Ø©&#039;
            };
            
            const typeMap = {
                &#039;mixed&#039;: &#039;Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙ†ÙˆØ¹Ø© (ØªØ¹Ø±ÙŠÙØ§ØªØŒ Ù…Ù‚Ø§Ø±Ù†Ø§ØªØŒ ØªØ·Ø¨ÙŠÙ‚Ø§Øª)&#039;,
                &#039;definitions&#039;: &#039;Ø£Ø³Ø¦Ù„Ø© ØªØ¹Ø±ÙŠÙØ§Øª ÙˆÙ…ØµØ·Ù„Ø­Ø§Øª&#039;,
                &#039;applications&#039;: &#039;Ø£Ø³Ø¦Ù„Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¹Ù…Ù„ÙŠØ© ÙˆØ£Ù…Ø«Ù„Ø©&#039;,
                &#039;analysis&#039;: &#039;Ø£Ø³Ø¦Ù„Ø© ØªØ­Ù„ÙŠÙ„ ÙˆÙÙ‡Ù… Ø¹Ù…ÙŠÙ‚&#039;
            };
            
            const focusMap = {
                &#039;comprehensive&#039;: &#039;Ø´Ø§Ù…Ù„ - ØªØºØ·ÙŠØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨&#039;,
                &#039;concepts&#039;: &#039;Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙˆØ§Ù„ØªØ¹Ø±ÙŠÙØ§Øª&#039;,
                &#039;details&#039;: &#039;Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„Ø­Ù‚Ø§Ø¦Ù‚ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©&#039;,
                &#039;applications&#039;: &#039;Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙˆØ§Ù„Ø£Ù…Ø«Ù„Ø©&#039;
            };
            
            // Determine if input is a topic or full text
            const wordCount = input.split(/\s+/).length;
            const isFullText = wordCount &gt; 20;
            
            let prompt = &#039;&#039;;
            
            if (isFullText) {
                prompt = `Ø£Ù†Øª Ù…Ø¯Ø±Ø³ Ø®Ø¨ÙŠØ±. Ø­Ù„Ù„ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ø§Ù„ØªØ§Ù„ÙŠ ÙˆØ£Ù†Ø´Ø¦ ${count} Ø¨Ø·Ø§Ù‚Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©.

Ø§Ù„Ù†Øµ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ:
&quot;${input}&quot;

Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:
- Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ: ${levelMap[educationLevel]}
- Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙØµÙŠÙ„: ${detailMap[detailLevel]}
- Ù†ÙˆØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: ${typeMap[questionType]}
- Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰: ${focusMap[focusType]}
- Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ…Ø®ØªØµØ±Ø© (2-4 Ø£Ø³Ø·Ø±)
- ØªØºØ·ÙŠØ© Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ù‡Ù…Ø© ÙÙŠ Ø§Ù„Ù†Øµ
- Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰

Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø¨Ø¯Ù‚Ø©:
Ø³1: [Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„ØŸ]
Ø¬1: [Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰]

Ø³2: [Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø«Ø§Ù†ÙŠØŸ]
Ø¬2: [Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©]

ÙˆÙ‡ÙƒØ°Ø§ Ø­ØªÙ‰ ${count} Ø¨Ø·Ø§Ù‚Ø§Øª...`;
            } else {
                prompt = `Ø£Ù†Øª Ù…Ø¯Ø±Ø³ Ø®Ø¨ÙŠØ± Ù…ØªØ®ØµØµ. Ø£Ù†Ø´Ø¦ ${count} Ø¨Ø·Ø§Ù‚Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø­ÙˆÙ„ Ù…ÙˆØ¶ÙˆØ¹ &quot;${input}&quot;.

Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:
- Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ: ${levelMap[educationLevel]}
- Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙØµÙŠÙ„: ${detailMap[detailLevel]}
- Ù†ÙˆØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: ${typeMap[questionType]}
- Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰: ${focusMap[focusType]}
- Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø¯Ø¯
- Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰

Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø¨Ø¯Ù‚Ø©:
Ø³1: [Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„ØŸ]
Ø¬1: [Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰]

Ø³2: [Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø«Ø§Ù†ÙŠØŸ]
Ø¬2: [Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©]

ÙˆÙ‡ÙƒØ°Ø§ Ø­ØªÙ‰ ${count} Ø¨Ø·Ø§Ù‚Ø§Øª...`;
            }
            
            document.getElementById(&#039;generatedPrompt&#039;).value = prompt;
            document.getElementById(&#039;promptDisplay&#039;).classList.remove(&#039;hidden&#039;);
            showNotification(&#039;ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Øµ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ!&#039;, &#039;success&#039;);
        }

        // Copy Prompt to Clipboard
        async function copyPrompt() {
            const promptText = document.getElementById(&#039;generatedPrompt&#039;).value;
            
            try {
                await navigator.clipboard.writeText(promptText);
                showNotification(&#039;ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©!&#039;, &#039;success&#039;);
            } catch (error) {
                // Fallback for older browsers
                const textArea = document.getElementById(&#039;generatedPrompt&#039;);
                textArea.select();
                document.execCommand(&#039;copy&#039;);
                showNotification(&#039;ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©!&#039;, &#039;success&#039;);
            }
        }

        // Hide Prompt Display
        function hidePrompt() {
            document.getElementById(&#039;promptDisplay&#039;).classList.add(&#039;hidden&#039;);
        }

        // Update AI Text Count
        function updateAiTextCount() {
            const textArea = document.getElementById(&#039;aiGeneratedText&#039;);
            const countSpan = document.getElementById(&#039;aiTextCount&#039;);
            
            if (textArea &amp;&amp; countSpan) {
                const text = textArea.value.trim();
                countSpan.textContent = text.length;
            }
        }

        // Clear AI Text
        function clearAiText() {
            document.getElementById(&#039;aiGeneratedText&#039;).value = &#039;&#039;;
            updateAiTextCount();
            showNotification(&#039;ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù†Øµ&#039;, &#039;info&#039;);
        }

        // Process AI Generated Text (Offline)
        function processAiText() {
            const aiText = document.getElementById(&#039;aiGeneratedText&#039;).value.trim();
            
            if (!aiText) {
                showNotification(&#039;ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†Øµ Ø§Ù„Ù…ÙÙˆÙ„Ø¯ Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø£ÙˆÙ„Ø§Ù‹&#039;, &#039;error&#039;);
                return;
            }
            
            // Show preview modal first
            showTextPreviewModal(aiText);
        }
        
        function showTextPreviewModal(text) {
            const modal = document.createElement(&#039;div&#039;);
            modal.className = &#039;modal-overlay&#039;;
            modal.innerHTML = `
                &lt;div class=&quot;modal-content max-w-4xl&quot;&gt;
                    &lt;div class=&quot;text-4xl mb-4&quot;&gt;ğŸ”&lt;/div&gt;
                    &lt;h2 class=&quot;text-2xl font-bold text-gray-800 mb-4&quot;&gt;Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ù…ÙØ¯Ø®Ù„&lt;/h2&gt;
                    
                    &lt;div class=&quot;bg-gray-50 rounded-xl p-4 mb-6 max-h-60 overflow-y-auto border-2 border-gray-200&quot;&gt;
                        &lt;pre class=&quot;text-sm text-gray-700 whitespace-pre-wrap&quot;&gt;${text}&lt;/pre&gt;
                    &lt;/div&gt;
                    
                    &lt;div class=&quot;bg-blue-50 rounded-xl p-4 mb-6 border-2 border-blue-200&quot;&gt;
                        &lt;h3 class=&quot;font-bold text-blue-800 mb-3&quot;&gt;ğŸ“‹ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©:&lt;/h3&gt;
                        &lt;div class=&quot;grid md:grid-cols-2 gap-4 text-sm&quot;&gt;
                            &lt;div&gt;
                                &lt;p class=&quot;font-bold text-blue-700 mb-2&quot;&gt;Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ:&lt;/p&gt;
                                &lt;code class=&quot;bg-white p-2 rounded block text-xs&quot;&gt;
Ø³1: Ù…Ø§ Ù‡Ùˆ...ØŸ&lt;br&gt;
Ø¬1: Ù‡Ùˆ...&lt;br&gt;&lt;br&gt;
Ø³2: ÙƒÙŠÙ...ØŸ&lt;br&gt;
Ø¬2: ÙŠØªÙ…...
                                &lt;/code&gt;
                            &lt;/div&gt;
                            &lt;div&gt;
                                &lt;p class=&quot;font-bold text-blue-700 mb-2&quot;&gt;Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø±Ù‚Ù…:&lt;/p&gt;
                                &lt;code class=&quot;bg-white p-2 rounded block text-xs&quot;&gt;
1. Ù…Ø§ Ù‡Ùˆ...ØŸ&lt;br&gt;
Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡ÙŠ...&lt;br&gt;&lt;br&gt;
2. ÙƒÙŠÙ...ØŸ&lt;br&gt;
ÙŠØªÙ…...
                                &lt;/code&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    
                    &lt;div class=&quot;flex gap-4&quot;&gt;
                        &lt;button onclick=&quot;proceedWithProcessing()&quot; 
                                class=&quot;flex-1 bg-green-600 text-white py-3 px-6 rounded-xl font-bold hover:bg-green-700 transition-all&quot;&gt;
                            âœ… Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
                        &lt;/button&gt;
                        &lt;button onclick=&quot;closeModal()&quot; 
                                class=&quot;flex-1 bg-gray-600 text-white py-3 px-6 rounded-xl font-bold hover:bg-gray-700 transition-all&quot;&gt;
                            âŒ Ø¥Ù„ØºØ§Ø¡
                        &lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            `;
            document.body.appendChild(modal);
        }
        
        function proceedWithProcessing() {
            closeModal();
            
            const aiText = document.getElementById(&#039;aiGeneratedText&#039;).value.trim();
            
            try {
                const cards = parseFlashcardsFromResponse(aiText);
                
                if (cards.length === 0) {
                    showDetailedErrorModal(aiText);
                    return;
                }
                
                flashcards = cards;
                displayFlashcards();
                showSections();
                updateSelects();
                
                showSuccessModal(flashcards.length);
                showNotification(`ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ${flashcards.length} Ø¨Ø·Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­!`, &#039;success&#039;);
                
            } catch (error) {
                console.error(&#039;Error processing AI text:&#039;, error);
                showDetailedErrorModal(aiText);
            }
        }
        
        function showDetailedErrorModal(text) {
            const modal = document.createElement(&#039;div&#039;);
            modal.className = &#039;modal-overlay&#039;;
            modal.innerHTML = `
                &lt;div class=&quot;modal-content max-w-4xl&quot;&gt;
                    &lt;div class=&quot;text-4xl mb-4&quot;&gt;âš ï¸&lt;/div&gt;
                    &lt;h2 class=&quot;text-2xl font-bold text-red-800 mb-4&quot;&gt;Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨Ø·Ø§Ù‚Ø§Øª ØµØ­ÙŠØ­Ø©&lt;/h2&gt;
                    
                    &lt;div class=&quot;bg-red-50 rounded-xl p-4 mb-6 border-2 border-red-200&quot;&gt;
                        &lt;p class=&quot;text-red-700 mb-4&quot;&gt;Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ù† ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Øµ Ø§Ù„Ù…ÙØ¯Ø®Ù„. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù†Øµ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© ÙˆØ¥Ø¬Ø§Ø¨Ø§Øª Ø¨Ø£Ø­Ø¯ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:&lt;/p&gt;
                        
                        &lt;div class=&quot;grid md:grid-cols-2 gap-4&quot;&gt;
                            &lt;div class=&quot;bg-white rounded-lg p-3&quot;&gt;
                                &lt;h4 class=&quot;font-bold text-red-800 mb-2&quot;&gt;âœ… ØªÙ†Ø³ÙŠÙ‚ ØµØ­ÙŠØ­:&lt;/h4&gt;
                                &lt;code class=&quot;text-xs text-gray-700&quot;&gt;
Ø³1: Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ&lt;br&gt;
Ø¬1: Ù‡Ùˆ ØªÙ‚Ù†ÙŠØ© ØªØ­Ø§ÙƒÙŠ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¨Ø´Ø±ÙŠ&lt;br&gt;&lt;br&gt;
Ø³2: ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ØŸ&lt;br&gt;
Ø¬2: ÙŠØ³ØªØ®Ø¯Ù… Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ù…Ø¹Ù‚Ø¯Ø©
                                &lt;/code&gt;
                            &lt;/div&gt;
                            &lt;div class=&quot;bg-white rounded-lg p-3&quot;&gt;
                                &lt;h4 class=&quot;font-bold text-red-800 mb-2&quot;&gt;âœ… ØªÙ†Ø³ÙŠÙ‚ Ø¨Ø¯ÙŠÙ„:&lt;/h4&gt;
                                &lt;code class=&quot;text-xs text-gray-700&quot;&gt;
1. Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŸ&lt;br&gt;
Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ù‡ÙŠ ÙƒØªØ§Ø¨Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù„Ù„Ø­Ø§Ø³ÙˆØ¨&lt;br&gt;&lt;br&gt;
2. Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù„ØºØ§ØªØŸ&lt;br&gt;
Ù‡ÙŠ Ø£Ø¯ÙˆØ§Øª Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø­Ø§Ø³ÙˆØ¨
                                &lt;/code&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    
                    &lt;div class=&quot;bg-yellow-50 rounded-xl p-4 mb-6 border-2 border-yellow-200&quot;&gt;
                        &lt;h3 class=&quot;font-bold text-yellow-800 mb-3&quot;&gt;ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù„Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:&lt;/h3&gt;
                        &lt;ul class=&quot;text-sm text-yellow-700 space-y-2&quot;&gt;
                            &lt;li&gt;&bull; ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø£Ø³Ø¦Ù„Ø© ØªÙ†ØªÙ‡ÙŠ Ø¨Ø¹Ù„Ø§Ù…Ø© Ø§Ø³ØªÙÙ‡Ø§Ù… (ØŸ)&lt;/li&gt;
                            &lt;li&gt;&bull; ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¥Ø¬Ø§Ø¨Ø§Øª ÙˆØ§Ø¶Ø­Ø© Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„&lt;/li&gt;
                            &lt;li&gt;&bull; Ø§Ø³ØªØ®Ø¯Ù… &quot;Ø³&quot; Ùˆ &quot;Ø¬&quot; Ø£Ùˆ Ø£Ø±Ù‚Ø§Ù… Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª&lt;/li&gt;
                            &lt;li&gt;&bull; ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø±Ù…ÙˆØ² Ø£Ùˆ ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù…Ø¹Ù‚Ø¯Ø©&lt;/li&gt;
                            &lt;li&gt;&bull; Ø¬Ø±Ø¨ Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù…Ù† Ø§Ù„Ù…ØµØ¯Ø±&lt;/li&gt;
                        &lt;/ul&gt;
                    &lt;/div&gt;
                    
                    &lt;div class=&quot;flex gap-4&quot;&gt;
                        &lt;button onclick=&quot;closeModal()&quot; 
                                class=&quot;flex-1 bg-blue-600 text-white py-3 px-6 rounded-xl font-bold hover:bg-blue-700 transition-all&quot;&gt;
                            ğŸ”„ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Øµ ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                        &lt;/button&gt;
                        &lt;button onclick=&quot;createSampleCards()&quot; 
                                class=&quot;flex-1 bg-green-600 text-white py-3 px-6 rounded-xl font-bold hover:bg-green-700 transition-all&quot;&gt;
                            ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
                        &lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            `;
            document.body.appendChild(modal);
        }
        
        function createSampleCards() {
            closeModal();
            
            flashcards = [
                {
                    question: &quot;Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ&quot;,
                    answer: &quot;Ù‡Ùˆ ØªÙ‚Ù†ÙŠØ© ØªØ­Ø§ÙƒÙŠ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¨Ø´Ø±ÙŠ ÙÙŠ Ø§Ù„Ø¢Ù„Ø§Øª ÙˆØ§Ù„Ø­Ø§Ø³ÙˆØ¨&quot;
                },
                {
                    question: &quot;Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŸ&quot;,
                    answer: &quot;Ù‡ÙŠ Ø¹Ù…Ù„ÙŠØ© ÙƒØªØ§Ø¨Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª ÙˆØ§Ù„Ø£ÙˆØ§Ù…Ø± Ù„Ù„Ø­Ø§Ø³ÙˆØ¨ Ø¨Ù„ØºØ© ÙŠÙÙ‡Ù…Ù‡Ø§&quot;
                },
                {
                    question: &quot;Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¥Ù†ØªØ±Ù†ØªØŸ&quot;,
                    answer: &quot;Ø´Ø¨ÙƒØ© Ø¹Ø§Ù„Ù…ÙŠØ© ØªØ±Ø¨Ø· Ø§Ù„Ø­Ø§Ø³ÙˆØ¨Ø§Øª Ø­ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù…&quot;
                },
                {
                    question: &quot;Ù…Ø§ Ù‡ÙŠ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ&quot;,
                    answer: &quot;Ù†Ø¸Ø§Ù… Ù„ØªØ®Ø²ÙŠÙ† ÙˆØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù†Ø¸Ù…Ø©&quot;
                },
                {
                    question: &quot;Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŸ&quot;,
                    answer: &quot;Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø­Ø§Ø³ÙˆØ¨ÙŠ Ù…ØµÙ…Ù… Ù„Ø£Ø¯Ø§Ø¡ Ù…Ù‡Ø§Ù… Ù…Ø­Ø¯Ø¯Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…&quot;
                }
            ];
            
            displayFlashcards();
            showSections();
            updateSelects();
            
            showNotification(&#039;ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ 5 Ø¨Ø·Ø§Ù‚Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©!&#039;, &#039;success&#039;);
        }


        
        // Generate Cards with AI (Unified Function)
        async function generateCards() {
            const input = document.getElementById(&#039;topicOrText&#039;).value.trim();
            const count = parseInt(document.getElementById(&#039;cardCount&#039;).value);
            const educationLevel = document.getElementById(&#039;educationLevel&#039;).value;
            const detailLevel = document.getElementById(&#039;detailLevel&#039;).value;
            const questionType = document.getElementById(&#039;questionType&#039;).value;
            const focusType = document.getElementById(&#039;focusType&#039;).value;
            
            if (!input) {
                showNotification(&#039;ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø£Ùˆ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ø£ÙˆÙ„Ø§Ù‹&#039;, &#039;error&#039;);
                return;
            }
            
            // Show generation modal
            const modal = showGenerationModal();
            
            try {
                // Determine if input is a topic or full text
                const wordCount = input.split(/\s+/).length;
                const isFullText = wordCount &gt; 20; // If more than 20 words, treat as full text
                
                // Map values to Arabic descriptions
                const levelMap = {
                    &#039;elementary&#039;: &#039;Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© - Ø£Ø³Ø¦Ù„Ø© Ø¨Ø³ÙŠØ·Ø© ÙˆÙ…Ø¨Ø§Ø´Ø±Ø©&#039;,
                    &#039;middle&#039;: &#039;Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© - Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„ØªØ¹Ù‚ÙŠØ¯&#039;,
                    &#039;high&#039;: &#039;Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© - Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆÙ…Ø¹Ù…Ù‚Ø©&#039;,
                    &#039;university&#039;: &#039;Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ© - Ø£Ø³Ø¦Ù„Ø© Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù…ØªØ®ØµØµØ©&#039;
                };
                
                const detailMap = {
                    &#039;basic&#039;: &#039;Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© ÙˆÙ…Ø¨Ø³Ø·Ø©&#039;,
                    &#039;detailed&#039;: &#039;Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ÙØµÙ„Ø© ÙˆØ´Ø§Ù…Ù„Ø©&#039;,
                    &#039;advanced&#039;: &#039;Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆÙ…Ø¹Ù…Ù‚Ø©&#039;
                };
                
                const typeMap = {
                    &#039;mixed&#039;: &#039;Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙ†ÙˆØ¹Ø© (ØªØ¹Ø±ÙŠÙØ§ØªØŒ Ù…Ù‚Ø§Ø±Ù†Ø§ØªØŒ ØªØ·Ø¨ÙŠÙ‚Ø§Øª)&#039;,
                    &#039;definitions&#039;: &#039;Ø£Ø³Ø¦Ù„Ø© ØªØ¹Ø±ÙŠÙØ§Øª ÙˆÙ…ØµØ·Ù„Ø­Ø§Øª&#039;,
                    &#039;applications&#039;: &#039;Ø£Ø³Ø¦Ù„Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¹Ù…Ù„ÙŠØ© ÙˆØ£Ù…Ø«Ù„Ø©&#039;,
                    &#039;analysis&#039;: &#039;Ø£Ø³Ø¦Ù„Ø© ØªØ­Ù„ÙŠÙ„ ÙˆÙÙ‡Ù… Ø¹Ù…ÙŠÙ‚&#039;
                };
                
                const focusMap = {
                    &#039;comprehensive&#039;: &#039;Ø´Ø§Ù…Ù„ - ØªØºØ·ÙŠØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨&#039;,
                    &#039;concepts&#039;: &#039;Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙˆØ§Ù„ØªØ¹Ø±ÙŠÙØ§Øª&#039;,
                    &#039;details&#039;: &#039;Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„Ø­Ù‚Ø§Ø¦Ù‚ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©&#039;,
                    &#039;applications&#039;: &#039;Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙˆØ§Ù„Ø£Ù…Ø«Ù„Ø©&#039;
                };
                
                let prompt = &#039;&#039;;
                
                if (isFullText) {
                    // Process as full text
                    prompt = `
Ø£Ù†Øª Ù…Ø¯Ø±Ø³ Ø®Ø¨ÙŠØ±. Ø­Ù„Ù„ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ø§Ù„ØªØ§Ù„ÙŠ ÙˆØ£Ù†Ø´Ø¦ ${count} Ø¨Ø·Ø§Ù‚Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©.

Ø§Ù„Ù†Øµ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ:
&quot;${input}&quot;

Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:
- Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ: ${levelMap[educationLevel]}
- Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙØµÙŠÙ„: ${detailMap[detailLevel]}
- Ù†ÙˆØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: ${typeMap[questionType]}
- Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰: ${focusMap[focusType]}
- Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ…Ø®ØªØµØ±Ø© (2-4 Ø£Ø³Ø·Ø±)
- ØªØºØ·ÙŠØ© Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ù‡Ù…Ø© ÙÙŠ Ø§Ù„Ù†Øµ
- Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰

Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø¨Ø¯Ù‚Ø©:
Ø³1: [Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„ØŸ]
Ø¬1: [Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰]

Ø³2: [Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø«Ø§Ù†ÙŠØŸ]
Ø¬2: [Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©]

ÙˆÙ‡ÙƒØ°Ø§ Ø­ØªÙ‰ ${count} Ø¨Ø·Ø§Ù‚Ø§Øª...
                    `;
                } else {
                    // Process as topic
                    prompt = `
Ø£Ù†Øª Ù…Ø¯Ø±Ø³ Ø®Ø¨ÙŠØ± Ù…ØªØ®ØµØµ. Ø£Ù†Ø´Ø¦ ${count} Ø¨Ø·Ø§Ù‚Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø­ÙˆÙ„ Ù…ÙˆØ¶ÙˆØ¹ &quot;${input}&quot;.

Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:
- Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ: ${levelMap[educationLevel]}
- Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙØµÙŠÙ„: ${detailMap[detailLevel]}
- Ù†ÙˆØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: ${typeMap[questionType]}
- Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰: ${focusMap[focusType]}
- Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø¯Ø¯
- Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰

Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø¨Ø¯Ù‚Ø©:
Ø³1: [Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„ØŸ]
Ø¬1: [Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰]

Ø³2: [Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø«Ø§Ù†ÙŠØŸ]
Ø¬2: [Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©]

ÙˆÙ‡ÙƒØ°Ø§ Ø­ØªÙ‰ ${count} Ø¨Ø·Ø§Ù‚Ø§Øª...
                    `;
                }
                
                const response = await callGeminiAPI(prompt);
                const cards = parseFlashcardsFromResponse(response);
                
                if (cards.length === 0) {
                    throw new Error(&#039;No valid cards parsed from AI response&#039;);
                }
                
                flashcards = cards.slice(0, count);
                displayFlashcards();
                showSections();
                updateSelects();
                
                // Close generation modal and show success modal
                closeModal();
                showSuccessModal(flashcards.length);
                
            } catch (error) {
                console.error(&#039;Error generating cards:&#039;, error);
                closeModal();
                showNotification(&#039;ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª&#039;, &#039;error&#039;);
            }
        }
        
        // Add Manual Card
        function addManualCard() {
            const question = document.getElementById(&#039;manualQuestion&#039;).value.trim();
            const answer = document.getElementById(&#039;manualAnswer&#039;).value.trim();
            
            if (!question || !answer) {
                showNotification(&#039;ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„ ÙˆØ§Ù„Ø¥Ø¬Ø§Ø¨Ø©&#039;, &#039;error&#039;);
                return;
            }
            
            flashcards.push({ question, answer });
            document.getElementById(&#039;manualQuestion&#039;).value = &#039;&#039;;
            document.getElementById(&#039;manualAnswer&#039;).value = &#039;&#039;;
            
            displayFlashcards();
            showSections();
            updateSelects();
            showNotification(&#039;ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­!&#039;, &#039;success&#039;);
        }
        
        // Student Management
        function addStudent() {
            const nameInput = document.getElementById(&#039;studentName&#039;);
            const name = nameInput.value.trim();
            
            if (!name) {
                showNotification(&#039;ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨&#039;, &#039;error&#039;);
                return;
            }
            
            if (students.includes(name)) {
                showNotification(&#039;Ù‡Ø°Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„&#039;, &#039;error&#039;);
                return;
            }
            
            students.push(name);
            studentScores[name] = 0;
            nameInput.value = &#039;&#039;;
            
            updateStudentsList();
            updateSelects();
            updateLeaderboard();
            showNotification(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ ${name} Ø¨Ù†Ø¬Ø§Ø­`, &#039;success&#039;);
        }
        
        function addBulkStudents() {
            const bulkText = document.getElementById(&#039;bulkStudents&#039;).value.trim();
            
            if (!bulkText) {
                showNotification(&#039;ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø·Ù„Ø§Ø¨&#039;, &#039;error&#039;);
                return;
            }
            
            const names = bulkText.split(&#039;\n&#039;)
                .map(name =&gt; name.trim())
                .filter(name =&gt; name.length &gt; 0);
            
            if (names.length === 0) {
                showNotification(&#039;Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£Ø³Ù…Ø§Ø¡ ØµØ­ÙŠØ­Ø©&#039;, &#039;error&#039;);
                return;
            }
            
            let addedCount = 0;
            let duplicateCount = 0;
            
            names.forEach(name =&gt; {
                if (!students.includes(name)) {
                    students.push(name);
                    studentScores[name] = 0;
                    addedCount++;
                } else {
                    duplicateCount++;
                }
            });
            
            document.getElementById(&#039;bulkStudents&#039;).value = &#039;&#039;;
            updateStudentsList();
            updateSelects();
            updateLeaderboard();
            
            let message = `ØªÙ… Ø¥Ø¶Ø§ÙØ© ${addedCount} Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­`;
            if (duplicateCount &gt; 0) {
                message += ` (ØªÙ… ØªØ¬Ø§Ù‡Ù„ ${duplicateCount} Ø§Ø³Ù… Ù…ÙƒØ±Ø±)`;
            }
            
            showNotification(message, &#039;success&#039;);
        }

        function generateRandomStudents() {
            const names = [&#039;Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯&#039;, &#039;ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ&#039;, &#039;Ù…Ø­Ù…Ø¯ Ø³Ø§Ù„Ù…&#039;, &#039;Ù†ÙˆØ± Ø§Ù„Ù‡Ø¯Ù‰&#039;, &#039;Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø£Ø­Ù…Ø¯&#039;, &#039;Ù…Ø±ÙŠÙ… Ø­Ø³Ù†&#039;, &#039;Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯&#039;, &#039;ÙŠÙˆØ³Ù Ø¹Ù„ÙŠ&#039;, &#039;Ø²ÙŠÙ†Ø¨ Ù…Ø­Ù…Ø¯&#039;, &#039;Ø¹Ù…Ø± Ø³Ø§Ù„Ù…&#039;];
            
            let addedCount = 0;
            names.forEach(name =&gt; {
                if (!students.includes(name)) {
                    students.push(name);
                    studentScores[name] = 0;
                    addedCount++;
                }
            });
            
            updateStudentsList();
            updateSelects();
            updateLeaderboard();
            showNotification(`ØªÙ… Ø¥Ø¶Ø§ÙØ© ${addedCount} Ø·Ø§Ù„Ø¨ ØªØ¬Ø±ÙŠØ¨ÙŠ`, &#039;success&#039;);
        }
        
        function removeStudent(name) {
            students = students.filter(s =&gt; s !== name);
            delete studentScores[name];
            
            if (currentStudent === name) {
                currentStudent = null;
                document.getElementById(&#039;studentSelect&#039;).value = &#039;&#039;;
            }
            
            updateStudentsList();
            updateSelects();
            updateLeaderboard();
            showNotification(`ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ø§Ù„Ø¨ ${name}`, &#039;success&#039;);
        }
        
        function updateStudentsList() {
            const container = document.getElementById(&#039;studentsList&#039;);
            container.innerHTML = students.map(student =&gt; `
                &lt;div class=&quot;bg-blue-50 border-2 border-blue-200 rounded-xl p-4 flex items-center justify-between&quot;&gt;
                    &lt;div class=&quot;flex items-center&quot;&gt;
                        &lt;div class=&quot;w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold ml-3&quot;&gt;
                            ${student.charAt(0)}
                        &lt;/div&gt;
                        &lt;div&gt;
                            &lt;div class=&quot;font-bold text-gray-800&quot;&gt;${student}&lt;/div&gt;
                            &lt;div class=&quot;text-sm text-gray-600&quot;&gt;Ø§Ù„Ù†Ù‚Ø§Ø·: ${studentScores[student] || 0}&lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;button onclick=&quot;removeStudent(&#039;${student}&#039;)&quot; 
                            class=&quot;text-red-500 hover:text-red-700 p-1&quot;&gt;
                        ğŸ—‘ï¸
                    &lt;/button&gt;
                &lt;/div&gt;
            `).join(&#039;&#039;);
        }
        
        // Display Functions
        function showSections() {
            document.getElementById(&#039;cardsSection&#039;).classList.remove(&#039;hidden&#039;);
            document.getElementById(&#039;quizSection&#039;).classList.remove(&#039;hidden&#039;);
        }
        
        function updateSelects() {
            const studentSelect = document.getElementById(&#039;studentSelect&#039;);
            const quizStudentSelect = document.getElementById(&#039;quizStudentSelect&#039;);
            
            const options = students.map(student =&gt; 
                `&lt;option value=&quot;${student}&quot;&gt;${student}&lt;/option&gt;`
            ).join(&#039;&#039;);
            
            studentSelect.innerHTML = &#039;&lt;option value=&quot;&quot;&gt;Ø§Ø®ØªØ± Ø§Ù„Ø·Ø§Ù„Ø¨&lt;/option&gt;&#039; + options;
            quizStudentSelect.innerHTML = &#039;&lt;option value=&quot;&quot;&gt;Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨&lt;/option&gt;&#039; + options;
        }
        
        function switchStudent() {
            currentStudent = document.getElementById(&#039;studentSelect&#039;).value;
            displayFlashcards();
        }
        
        function displayFlashcards() {
            const container = document.getElementById(&#039;flashcardsContainer&#039;);
            const cardCounter = document.getElementById(&#039;cardCounter&#039;);
            
            cardCounter.textContent = `${flashcards.length} Ø¨Ø·Ø§Ù‚Ø©`;
            
            container.innerHTML = flashcards.map((card, index) =&gt; `
                &lt;div class=&quot;flashcard slide-in&quot; style=&quot;animation-delay: ${index * 0.1}s&quot;&gt;
                    &lt;div class=&quot;flashcard-inner&quot; onclick=&quot;flipCard(${index})&quot;&gt;
                        &lt;div class=&quot;flashcard-front bg-gradient-to-br from-blue-500 to-purple-600 text-white&quot;&gt;
                            &lt;div class=&quot;text-center&quot;&gt;
                                &lt;div class=&quot;text-sm font-bold mb-4 opacity-75&quot;&gt;Ø¨Ø·Ø§Ù‚Ø© ${index + 1}&lt;/div&gt;
                                &lt;div class=&quot;text-lg font-bold&quot;&gt;${card.question}&lt;/div&gt;
                                &lt;div class=&quot;text-sm mt-4 opacity-75&quot;&gt;Ø§Ù†Ù‚Ø± Ù„Ù„ÙƒØ´Ù Ø¹Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©&lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class=&quot;flashcard-back bg-gradient-to-br from-green-500 to-emerald-600 text-white&quot;&gt;
                            &lt;div class=&quot;text-center&quot;&gt;
                                &lt;div class=&quot;text-sm font-bold mb-4 opacity-75&quot;&gt;Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©&lt;/div&gt;
                                &lt;div class=&quot;text-lg font-bold&quot;&gt;${card.answer}&lt;/div&gt;
                                ${currentStudent ? `
                                    &lt;div class=&quot;mt-4 space-x-2 space-x-reverse&quot;&gt;
                                        &lt;button onclick=&quot;rateCard(${index}, &#039;easy&#039;)&quot; 
                                                class=&quot;bg-green-600 hover:bg-green-700 px-3 py-1 rounded-lg text-sm font-bold&quot;&gt;
                                            ğŸ˜Š Ø³Ù‡Ù„
                                        &lt;/button&gt;
                                        &lt;button onclick=&quot;rateCard(${index}, &#039;hard&#039;)&quot; 
                                                class=&quot;bg-red-600 hover:bg-red-700 px-3 py-1 rounded-lg text-sm font-bold&quot;&gt;
                                            ğŸ˜“ ØµØ¹Ø¨
                                        &lt;/button&gt;
                                    &lt;/div&gt;
                                ` : &#039;&#039;}
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            `).join(&#039;&#039;);
        }
        
        function flipCard(index) {
            const cards = document.querySelectorAll(&#039;.flashcard&#039;);
            if (cards[index]) {
                cards[index].classList.toggle(&#039;flipped&#039;);
            }
        }
        
        function rateCard(cardIndex, rating) {
            event.stopPropagation();
            
            if (!currentStudent) return;
            
            const points = rating === &#039;easy&#039; ? 10 : 5;
            studentScores[currentStudent] += points;
            
            updateStudentsList();
            updateLeaderboard();
            
            const message = rating === &#039;easy&#039; ? 
                `Ù…Ù…ØªØ§Ø²! Ø­ØµÙ„ ${currentStudent} Ø¹Ù„Ù‰ ${points} Ù†Ù‚Ø§Ø·` :
                `Ø¬ÙŠØ¯! Ø­ØµÙ„ ${currentStudent} Ø¹Ù„Ù‰ ${points} Ù†Ù‚Ø§Ø·`;
            
            showNotification(message, &#039;success&#039;);
        }
        
        // Quiz System
        function startQuiz() {
            if (flashcards.length === 0) {
                showNotification(&#039;ÙŠØ±Ø¬Ù‰ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø£ÙˆÙ„Ø§Ù‹&#039;, &#039;error&#039;);
                return;
            }
            
            currentQuiz = [...flashcards].sort(() =&gt; Math.random() - 0.5).slice(0, 5);
            currentQuestionIndex = 0;
            currentScore = 0;
            
            document.getElementById(&#039;quizControls&#039;).classList.add(&#039;hidden&#039;);
            document.getElementById(&#039;quizGame&#039;).classList.remove(&#039;hidden&#039;);
            
            showQuestion();
        }
        
        function showQuestion() {
            if (currentQuestionIndex &gt;= currentQuiz.length) {
                endQuiz();
                return;
            }
            
            const question = currentQuiz[currentQuestionIndex];
            const progress = ((currentQuestionIndex + 1) / currentQuiz.length) * 100;
            
            document.getElementById(&#039;currentQuestionNum&#039;).textContent = currentQuestionIndex + 1;
            document.getElementById(&#039;totalQuestions&#039;).textContent = currentQuiz.length;
            document.getElementById(&#039;currentScore&#039;).textContent = currentScore;
            document.getElementById(&#039;progressBar&#039;).style.width = progress + &#039;%&#039;;
            document.getElementById(&#039;questionText&#039;).textContent = question.question;
            
            const options = generateOptions(question);
            document.getElementById(&#039;answerOptions&#039;).innerHTML = options.map((option, index) =&gt; `
                &lt;button onclick=&quot;selectAnswer(&#039;${option}&#039;, &#039;${question.answer}&#039;, ${index})&quot; 
                        class=&quot;answer-option bg-white border-2 border-gray-200 rounded-xl p-4 font-bold hover:border-blue-500 hover:bg-blue-50 transition-all&quot;&gt;
                    ${option}
                &lt;/button&gt;
            `).join(&#039;&#039;);
            
            document.getElementById(&#039;questionFeedback&#039;).classList.add(&#039;hidden&#039;);
        }
        
        function generateOptions(question) {
            const options = [question.answer];
            const otherAnswers = flashcards.filter(card =&gt; card.answer !== question.answer);
            
            while (options.length &lt; 4 &amp;&amp; otherAnswers.length &gt; 0) {
                const randomIndex = Math.floor(Math.random() * otherAnswers.length);
                const randomAnswer = otherAnswers[randomIndex].answer;
                if (!options.includes(randomAnswer)) {
                    options.push(randomAnswer);
                }
                otherAnswers.splice(randomIndex, 1);
            }
            
            // Add some generic wrong answers if needed
            while (options.length &lt; 4) {
                options.push(`Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© ${options.length}`);
            }
            
            return options.sort(() =&gt; Math.random() - 0.5);
        }
        
        function selectAnswer(selected, correct, optionIndex) {
            const isCorrect = selected === correct;
            const buttons = document.querySelectorAll(&#039;.answer-option&#039;);
            
            buttons.forEach(btn =&gt; btn.disabled = true);
            
            buttons.forEach((btn, index) =&gt; {
                if (btn.textContent.trim() === correct) {
                    btn.classList.add(&#039;bg-green-500&#039;, &#039;text-white&#039;, &#039;border-green-500&#039;);
                } else if (index === optionIndex &amp;&amp; !isCorrect) {
                    btn.classList.add(&#039;bg-red-500&#039;, &#039;text-white&#039;, &#039;border-red-500&#039;);
                }
            });
            
            if (isCorrect) {
                currentScore += 10;
                const selectedStudent = document.getElementById(&#039;quizStudentSelect&#039;).value;
                if (selectedStudent) {
                    studentScores[selectedStudent] += 10;
                }
            }
            
            showQuizFeedback(isCorrect, correct);
            
            currentQuestionIndex++;
            setTimeout(() =&gt; {
                showQuestion();
            }, 2000);
        }
        
        function showQuizFeedback(isCorrect, correctAnswer) {
            const feedbackDiv = document.getElementById(&#039;questionFeedback&#039;);
            feedbackDiv.classList.remove(&#039;hidden&#039;);
            
            if (isCorrect) {
                feedbackDiv.innerHTML = `
                    &lt;div class=&quot;bg-green-100 border-2 border-green-300 rounded-xl p-4 text-center&quot;&gt;
                        &lt;div class=&quot;text-2xl mb-2&quot;&gt;ğŸ‰&lt;/div&gt;
                        &lt;h3 class=&quot;text-lg font-bold text-green-800&quot;&gt;Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!&lt;/h3&gt;
                        &lt;p class=&quot;text-green-700&quot;&gt;Ø­ØµÙ„Øª Ø¹Ù„Ù‰ 10 Ù†Ù‚Ø§Ø·&lt;/p&gt;
                    &lt;/div&gt;
                `;
            } else {
                feedbackDiv.innerHTML = `
                    &lt;div class=&quot;bg-red-100 border-2 border-red-300 rounded-xl p-4 text-center&quot;&gt;
                        &lt;div class=&quot;text-2xl mb-2&quot;&gt;ğŸ˜”&lt;/div&gt;
                        &lt;h3 class=&quot;text-lg font-bold text-red-800&quot;&gt;Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©&lt;/h3&gt;
                        &lt;p class=&quot;text-red-700&quot;&gt;Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: &lt;strong&gt;${correctAnswer}&lt;/strong&gt;&lt;/p&gt;
                    &lt;/div&gt;
                `;
            }
        }
        
        function endQuiz() {
            const selectedStudent = document.getElementById(&#039;quizStudentSelect&#039;).value;
            
            document.getElementById(&#039;questionText&#039;).innerHTML = `
                &lt;div class=&quot;text-center&quot;&gt;
                    &lt;div class=&quot;text-4xl mb-4&quot;&gt;ğŸ†&lt;/div&gt;
                    &lt;h3 class=&quot;text-2xl font-bold text-purple-600 mb-4&quot;&gt;Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±!&lt;/h3&gt;
                    &lt;div class=&quot;text-xl font-bold text-blue-600&quot;&gt;
                        Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${currentScore}
                    &lt;/div&gt;
                &lt;/div&gt;
            `;
            
            document.getElementById(&#039;answerOptions&#039;).innerHTML = `
                &lt;button onclick=&quot;resetQuiz()&quot; 
                        class=&quot;col-span-2 bg-purple-600 text-white py-3 px-6 rounded-xl font-bold hover:bg-purple-700 transition-all&quot;&gt;
                    ğŸ® Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯
                &lt;/button&gt;
            `;
            
            document.getElementById(&#039;questionFeedback&#039;).classList.add(&#039;hidden&#039;);
            updateStudentsList();
            updateLeaderboard();
            
            if (selectedStudent) {
                showNotification(`${selectedStudent} Ø­ØµÙ„ Ø¹Ù„Ù‰ ${currentScore} Ù†Ù‚Ø·Ø©!`, &#039;success&#039;);
            }
        }
        
        function resetQuiz() {
            document.getElementById(&#039;quizControls&#039;).classList.remove(&#039;hidden&#039;);
            document.getElementById(&#039;quizGame&#039;).classList.add(&#039;hidden&#039;);
            currentQuestionIndex = 0;
            currentScore = 0;
        }
        
        function updateLeaderboard() {
            const leaderboardContent = document.getElementById(&#039;leaderboardContent&#039;);
            
            if (students.length === 0) {
                leaderboardContent.innerHTML = `
                    &lt;div class=&quot;text-center py-8 text-gray-500&quot;&gt;
                        &lt;div class=&quot;text-4xl mb-4&quot;&gt;ğŸ“Š&lt;/div&gt;
                        &lt;p class=&quot;text-lg&quot;&gt;Ø£Ø¶Ù Ø·Ù„Ø§Ø¨Ø§Ù‹ ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬&lt;/p&gt;
                    &lt;/div&gt;
                `;
                return;
            }
            
            const sortedStudents = students.sort((a, b) =&gt; studentScores[b] - studentScores[a]);
            
            leaderboardContent.innerHTML = `
                &lt;div class=&quot;space-y-4&quot;&gt;
                    ${sortedStudents.map((student, index) =&gt; {
                        const medal = index === 0 ? &#039;ğŸ¥‡&#039; : index === 1 ? &#039;ğŸ¥ˆ&#039; : index === 2 ? &#039;ğŸ¥‰&#039; : &#039;ğŸ…&#039;;
                        const bgColor = index === 0 ? &#039;from-yellow-400 to-orange-500&#039; : 
                                       index === 1 ? &#039;from-gray-300 to-gray-500&#039; :
                                       index === 2 ? &#039;from-orange-400 to-red-500&#039; : &#039;from-blue-400 to-purple-500&#039;;
                        
                        return `
                            &lt;div class=&quot;bg-gradient-to-r ${bgColor} text-white rounded-xl p-4 flex items-center justify-between&quot;&gt;
                                &lt;div class=&quot;flex items-center&quot;&gt;
                                    &lt;span class=&quot;text-2xl ml-4&quot;&gt;${medal}&lt;/span&gt;
                                    &lt;div&gt;
                                        &lt;div class=&quot;font-bold text-lg&quot;&gt;${student}&lt;/div&gt;
                                        &lt;div class=&quot;text-sm opacity-90&quot;&gt;Ø§Ù„Ù…Ø±ÙƒØ² ${index + 1}&lt;/div&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                                &lt;div class=&quot;text-right&quot;&gt;
                                    &lt;div class=&quot;text-2xl font-bold&quot;&gt;${studentScores[student]}&lt;/div&gt;
                                    &lt;div class=&quot;text-sm opacity-90&quot;&gt;Ù†Ù‚Ø·Ø©&lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        `;
                    }).join(&#039;&#039;)}
                &lt;/div&gt;
            `;
        }
    &lt;/script&gt;
&lt;script&gt;(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement(&#039;script&#039;);d.innerHTML=&quot;window.__CF$cv$params={r:&#039;96ebbf69d5fb5cd0&#039;,t:&#039;MTc1NTEyNTE3OC4wMDAwMDA=&#039;};var a=document.createElement(&#039;script&#039;);a.nonce=&#039;&#039;;a.src=&#039;/cdn-cgi/challenge-platform/scripts/jsd/main.js&#039;;document.getElementsByTagName(&#039;head&#039;)[0].appendChild(a);&quot;;b.getElementsByTagName(&#039;head&#039;)[0].appendChild(d)}}if(document.body){var a=document.createElement(&#039;iframe&#039;);a.height=1;a.width=1;a.style.position=&#039;absolute&#039;;a.style.top=0;a.style.left=0;a.style.border=&#039;none&#039;;a.style.visibility=&#039;hidden&#039;;document.body.appendChild(a);if(&#039;loading&#039;!==document.readyState)c();else if(window.addEventListener)document.addEventListener(&#039;DOMContentLoaded&#039;,c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);&#039;loading&#039;!==document.readyState&amp;&amp;(document.onreadystatechange=e,c())}}}})();&lt;/script&gt;&lt;/body&gt;
&lt;/html&gt;
